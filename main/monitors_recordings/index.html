
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../generate_simulations/">
      
      
        <link rel="next" href="../optimize_neuron/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>Monitors / Recordings - CompNeuroPy</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#create-monitors" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CompNeuroPy" class="md-header__button md-logo" aria-label="CompNeuroPy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CompNeuroPy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Monitors / Recordings
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Olimaol/CompNeuroPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CompNeuroPy" class="md-nav__button md-logo" aria-label="CompNeuroPy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CompNeuroPy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Olimaol/CompNeuroPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Main Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Main Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../generate_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../generate_simulations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Simulations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Monitors / Recordings
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Monitors / Recordings
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-monitors" class="md-nav__link">
    <span class="md-ellipsis">
      Create Monitors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create Monitors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chunks-and-periods" class="md-nav__link">
    <span class="md-ellipsis">
      Chunks and periods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chunks and periods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-recordings" class="md-nav__link">
    <span class="md-ellipsis">
      Get recordings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Get recordings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-recording-times" class="md-nav__link">
    <span class="md-ellipsis">
      Get recording times
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Get recording times">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_3" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot-recordings" class="md-nav__link">
    <span class="md-ellipsis">
      Plot recordings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors" class="md-nav__link">
    <span class="md-ellipsis">
      CompNeuroMonitors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompNeuroMonitors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.start" class="md-nav__link">
    <span class="md-ellipsis">
      start()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.pause" class="md-nav__link">
    <span class="md-ellipsis">
      pause()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.current_chunk" class="md-nav__link">
    <span class="md-ellipsis">
      current_chunk()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recordings" class="md-nav__link">
    <span class="md-ellipsis">
      get_recordings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recording_times" class="md-nav__link">
    <span class="md-ellipsis">
      get_recording_times()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recordings_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      get_recordings_and_clear()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes" class="md-nav__link">
    <span class="md-ellipsis">
      RecordingTimes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RecordingTimes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.time_lims" class="md-nav__link">
    <span class="md-ellipsis">
      time_lims()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.idx_lims" class="md-nav__link">
    <span class="md-ellipsis">
      idx_lims()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.all" class="md-nav__link">
    <span class="md-ellipsis">
      all()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.nr_periods" class="md-nav__link">
    <span class="md-ellipsis">
      nr_periods()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.combine_periods" class="md-nav__link">
    <span class="md-ellipsis">
      combine_periods()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.combine_chunks" class="md-nav__link">
    <span class="md-ellipsis">
      combine_chunks()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimize_neuron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimize a neuron model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../define_experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Define Experiments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dbs_stimulator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DBS Stimulator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_configurator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Configurator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Built-in Models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Built-in Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Full Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/neuron_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neuron Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/synapse_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synapse Models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Additional Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Additional Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/simulation_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simulation Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/simulation_requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simulation Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/analysis_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Analysis Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/model_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/system_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/extra_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extra Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/statistic_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Statistic Functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/generate_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/run_and_monitor_simulations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Simulations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/monitor_recordings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitor Recordings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/plot_recordings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plot Recordings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Define Experiments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/dbs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DBS Simulator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/opt_neuron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimize a neuron model
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-monitors" class="md-nav__link">
    <span class="md-ellipsis">
      Create Monitors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create Monitors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chunks-and-periods" class="md-nav__link">
    <span class="md-ellipsis">
      Chunks and periods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chunks and periods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-recordings" class="md-nav__link">
    <span class="md-ellipsis">
      Get recordings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Get recordings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-recording-times" class="md-nav__link">
    <span class="md-ellipsis">
      Get recording times
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Get recording times">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_3" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot-recordings" class="md-nav__link">
    <span class="md-ellipsis">
      Plot recordings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors" class="md-nav__link">
    <span class="md-ellipsis">
      CompNeuroMonitors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompNeuroMonitors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.start" class="md-nav__link">
    <span class="md-ellipsis">
      start()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.pause" class="md-nav__link">
    <span class="md-ellipsis">
      pause()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.current_chunk" class="md-nav__link">
    <span class="md-ellipsis">
      current_chunk()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recordings" class="md-nav__link">
    <span class="md-ellipsis">
      get_recordings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recording_times" class="md-nav__link">
    <span class="md-ellipsis">
      get_recording_times()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recordings_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      get_recordings_and_clear()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes" class="md-nav__link">
    <span class="md-ellipsis">
      RecordingTimes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RecordingTimes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.time_lims" class="md-nav__link">
    <span class="md-ellipsis">
      time_lims()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.idx_lims" class="md-nav__link">
    <span class="md-ellipsis">
      idx_lims()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.all" class="md-nav__link">
    <span class="md-ellipsis">
      all()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.nr_periods" class="md-nav__link">
    <span class="md-ellipsis">
      nr_periods()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.combine_periods" class="md-nav__link">
    <span class="md-ellipsis">
      combine_periods()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.monitors.RecordingTimes.combine_chunks" class="md-nav__link">
    <span class="md-ellipsis">
      combine_chunks()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Monitors / Recordings</h1>

<h2 id="create-monitors">Create Monitors<a class="headerlink" href="#create-monitors" title="Permanent link">#</a></h2>
<p>CompNeuroPy provides a <a href="#CompNeuroPy.monitors.CompNeuroMonitors"><code>CompNeuroMonitors</code></a> class that can be used to easily create and control multiple ANNarchy monitors at once. To create a <a href="#CompNeuroPy.monitors.CompNeuroMonitors"><code>CompNeuroMonitors</code></a> object, all that is needed is a monitors_dictionary that defines which variables should be recorded for each model component. All populations and projections have to have unique names to work with <a href="#CompNeuroPy.monitors.CompNeuroMonitors"><code>CompNeuroMonitors</code></a>. The keys of the monitor_dictionary are the names of the model components (in example below <em>"my_pop1"</em> and <em>"my_pop2"</em>). The key can also include a recording period (the time between two recordings, given after a ";"), e.g. record the variables of <em>my_pop1</em> only every 10 ms would look like this: <em>'pop;my_pop1;10':['v', 'spike']</em>. The default period is the time step of the simulation for populations and 1000 times the timestep for projections. The values of the monitor_dictionary are lists of all the variables that should be recorded from the corresponding components. The names of components (populations, projections) could be provided by a <a href="../generate_models/#CompNeuroPy.generate_model.CompNeuroModel"><code>CompNeuroModel</code></a>.</p>
<h3 id="example">Example:<a class="headerlink" href="#example" title="Permanent link">#</a></h3>
<p>Here the variables <em>v</em> and <em>spike</em> should be recorded of the population with the name <em>"my_pop1"</em> and the variable <em>v</em> should be recorded from the population with the name <em>"my_pop2"</em>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">CompNeuroPy</span> <span class="kn">import</span> <span class="n">CompNeuroMonitors</span>
<span class="n">monitor_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;my_pop1&#39;</span><span class="p">:[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;spike&#39;</span><span class="p">],</span> <span class="s1">&#39;my_pop2&#39;</span><span class="p">:[</span><span class="s1">&#39;v&#39;</span><span class="p">]}</span>
<span class="n">mon</span> <span class="o">=</span> <span class="n">CompNeuroMonitors</span><span class="p">(</span><span class="n">monitor_dictionary</span><span class="p">)</span>
</code></pre></div>
<p>A full example is available in the <a href="../../examples/monitor_recordings/">Examples</a>.</p>
<h2 id="chunks-and-periods">Chunks and periods<a class="headerlink" href="#chunks-and-periods" title="Permanent link">#</a></h2>
<p>In CompNeuroPy, recordings are divided into so-called chunks and periods. Chunks are simulation sections that are separated by monitor resets (optionally also reset the model). A chunk can consist of several periods. A period represents the time span between the start and pause of a monitor recording. To divide a simulation into chunks and periods, a <a href="#CompNeuroPy.monitors.CompNeuroMonitors"><code>CompNeuroMonitors</code></a> object provides the three functions <em>start()</em>, <em>pause()</em> and <em>reset()</em>.</p>
<p>At the beginning of a simulation, the monitors do not start automatically which is why the <em>start()</em> function must be called at least once. The <em>start()</em> function can also be used to resume paused recordings. With the function <em>pause()</em> recordings are paused. The function <em>reset()</em> starts a new chunk for the recordings (the end of a chunk is also always the end of a period, i.e. the last period of the corresponding chunk). After calling <em>reset()</em> the monitors remain in their current mode (active or paused). By default <em>reset()</em> also resets the model to the compile status (time = 0) by calling the ANNarchy <em>reset()</em> function and has the same arguments. If the argument <em>model</em> is set to False, the ANNarchy <em>reset()</em> function is not called and only a new chunk is created.</p>
<h3 id="example_1">Example:<a class="headerlink" href="#example_1" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">### first chunk, one period</span>
<span class="n">simulate</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1"># 100 ms not recorded</span>
<span class="n">mon</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>   <span class="c1"># start all monitors</span>
<span class="n">simulate</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1"># 100 ms recorded</span>

<span class="c1">### second chunk, two periods</span>
<span class="n">mon</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>   <span class="c1"># model reset, beginning of new chunk</span>
<span class="n">simulate</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1"># 100 ms recorded (monitors were active before reset --&gt; still active)</span>
<span class="n">mon</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>   <span class="c1"># pause all monitors</span>
<span class="n">simulate</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1"># 100 ms not recorded</span>
<span class="n">mon</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>   <span class="c1"># start all monitors</span>
<span class="n">simulate</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1"># 100 ms recorded</span>
</code></pre></div>
<h2 id="get-recordings">Get recordings<a class="headerlink" href="#get-recordings" title="Permanent link">#</a></h2>
<p>The recordings can be obtained from the <a href="#CompNeuroPy.monitors.CompNeuroMonitors"><code>CompNeuroMonitors</code></a> object using the <em>get_recordings()</em> function. This returns a list of dictionaries (one for each chunk). The dictionaries contain the recorded data defined with the monitor_dictionary at the <a href="#CompNeuroPy.monitors.CompNeuroMonitors"><code>CompNeuroMonitors</code></a> initialization. In the recordings dictionaries the keys have the following structure: "&lt;component_name&gt;;variable"; the corresponding dictionary values are the recordings of the respective variable. The dictionaries always contain the time step of the simulation (key = <em>"dt"</em>), the periods (time between recorded values) for each component (key = <em>"&lt;component_name&gt;;period"</em>) and the attributes of each component (key = <em>"&lt;component_name&gt;;parameter_dict"</em>).</p>
<h3 id="example_2">Example:<a class="headerlink" href="#example_2" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">recordings</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_recordings</span><span class="p">()</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;my_pop1;v&#39;</span><span class="p">]</span> <span class="c1">### variable v of my_pop1 from 1st chunk</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;my_pop1;v&#39;</span><span class="p">]</span> <span class="c1">### variable v of my_pop1 from 2nd chunk</span>
</code></pre></div>
<h2 id="get-recording-times">Get recording times<a class="headerlink" href="#get-recording-times" title="Permanent link">#</a></h2>
<p>In addition to the recordings themselves, recording times can also be obtained from the <a href="#CompNeuroPy.monitors.CompNeuroMonitors"><code>CompNeuroMonitors</code></a> object, which is very useful for later analyses. With the function <em>get_recording_times()</em> of the <a href="#CompNeuroPy.monitors.CompNeuroMonitors"><code>CompNeuroMonitors</code></a> object a <a href="#CompNeuroPy.monitors.RecordingTimes"><code>RecordingTimes</code></a> object can be obtained. From the <a href="#CompNeuroPy.monitors.RecordingTimes"><code>RecordingTimes</code></a> object one can get time limits (in ms) and coresponding indizes for the recordings.</p>
<h3 id="example_3">Example:<a class="headerlink" href="#example_3" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">recording_times</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">get_recording_times</span><span class="p">()</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">recording_times</span><span class="o">.</span><span class="n">time_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">### 200 ms</span>
<span class="n">start_idx</span>  <span class="o">=</span> <span class="n">recording_times</span><span class="o">.</span><span class="n">idx_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1">### 1000, if dt == 0.1</span>
<span class="n">end_time</span>   <span class="o">=</span> <span class="n">recording_times</span><span class="o">.</span><span class="n">time_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="c1">### 300 ms</span>
<span class="n">end_idx</span>    <span class="o">=</span> <span class="n">recording_times</span><span class="o">.</span><span class="n">idx_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1">### 2000</span>
</code></pre></div>
<p>You can combine the recordings of both chunks of the example simulation shown above into a single time array and a single value array using the <a href="#CompNeuroPy.monitors.RecordingTimes"><code>RecordingTimes</code></a> object's combine_chunks function:
<div class="highlight"><pre><span></span><code><span class="n">time_arr</span><span class="p">,</span> <span class="n">value_arr</span> <span class="o">=</span> <span class="n">recording_times</span><span class="o">.</span><span class="n">combine_chunks</span><span class="p">(</span><span class="n">recordings</span><span class="p">,</span> <span class="s1">&#39;my_pop1;v&#39;</span><span class="p">,</span> <span class="s1">&#39;consecutive&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h2 id="plot-recordings">Plot recordings<a class="headerlink" href="#plot-recordings" title="Permanent link">#</a></h2>
<p>To get a quick overview of the recordings, CompNeuroPy provides the <a href="../../additional/analysis_functions/#CompNeuroPy.analysis_functions.PlotRecordings"><code>PlotRecordings</code></a> class.</p>


<div class="doc doc-object doc-class">




<h2 id="CompNeuroPy.monitors.CompNeuroMonitors" class="doc doc-heading">
          <code>CompNeuroPy.monitors.CompNeuroMonitors</code>


<a href="#CompNeuroPy.monitors.CompNeuroMonitors" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents first">

  
      <p>Class to bring together ANNarchy monitors into one object.</p>

            <details class="quote">
              <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CompNeuroMonitors</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to bring together ANNarchy monitors into one object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon_dict</span><span class="o">=</span><span class="p">{}):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize CompNeuroMonitors object by creating ANNarchy monitors.</span>

<span class="sd">        Args:</span>
<span class="sd">            mon_dict (dict):</span>
<span class="sd">                dict with key=&quot;compartment_name;period&quot; where period is optional and</span>
<span class="sd">                val=list with variables to record.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_monitors</span><span class="p">(</span><span class="n">mon_dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span> <span class="o">=</span> <span class="n">mon_dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_internals</span><span class="p">(</span><span class="n">init_call</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_init_internals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init_call</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the following internal variables:</span>
<span class="sd">            - timings (dict):</span>
<span class="sd">                dict with key=&quot;pop_name&quot; for populations and &quot;proj_name&quot; for projections</span>
<span class="sd">                for each recorded population and projection and</span>
<span class="sd">                val={&quot;currently_paused&quot;: True, &quot;start&quot;: [], &quot;stop&quot;: []}</span>
<span class="sd">            - recordings (list):</span>
<span class="sd">                list with recordings of all chunks. Set to empty list.</span>
<span class="sd">            - recording_times (list):</span>
<span class="sd">                list with recording times of all chunks. Set to empty list.</span>
<span class="sd">            - already_got_recordings (bool):</span>
<span class="sd">                True if recordings were already requested, False otherwise. Set to</span>
<span class="sd">                False.</span>
<span class="sd">            - already_got_recording_times (bool):</span>
<span class="sd">                True if recording_times were already requested, False otherwise. Set to</span>
<span class="sd">                False.</span>
<span class="sd">            - get_recordings_reset_call (bool):</span>
<span class="sd">                True if get_recordings() and get_recording_times() are called within</span>
<span class="sd">                reset(), False otherwise. Set to False.</span>

<span class="sd">        Args:</span>
<span class="sd">            init_call (bool, optional):</span>
<span class="sd">                True if called from __init__(), False otherwise. Default: False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">init_call</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="c1">#### pause all ANNarchy monitors because currently paused will be set to False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>

        <span class="c1">### initialize timings</span>
        <span class="n">timings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;currently_paused&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timings</span> <span class="o">=</span> <span class="n">timings</span>

        <span class="c1">### initialize recordings and recording_times etc.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recordings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recording_times</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recordings</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recording_times</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@check_types</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compartment_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start or resume recording of all recorded compartments in compartment_list.</span>

<span class="sd">        Args:</span>
<span class="sd">            compartment_list (list, optional):</span>
<span class="sd">                List with compartment names to start or resume recording. Default: None,</span>
<span class="sd">                i.e., all compartments of initialized mon_dict are started or resumed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">compartment_list</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mon_dict_key_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">compartment_list</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">mon_dict_key_list</span>
            <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_monitors</span><span class="p">(</span><span class="n">compartment_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">)</span>

    <span class="nd">@check_types</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">pause</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compartment_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pause recording of all recorded compartments in compartment_list.</span>

<span class="sd">        Args:</span>
<span class="sd">            compartment_list (list, optional):</span>
<span class="sd">                List with compartment names to pause recording. Default: None,</span>
<span class="sd">                i.e., all compartments of initialized mon_dict are paused.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">compartment_list</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mon_dict_key_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">compartment_list</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">mon_dict_key_list</span>
            <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pause_monitors</span><span class="p">(</span><span class="n">compartment_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">populations</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">projections</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">synapses</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">monitors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">model</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">net_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new recording chunk by getting recordings and recording times of the</span>
<span class="sd">        current chunk and optionally resetting the model. Recordings are automatically</span>
<span class="sd">        resumed in the new chunk if they are not paused.</span>

<span class="sd">        Args:</span>
<span class="sd">            populations (bool, optional):</span>
<span class="sd">                If True, reset populations. Default: True.</span>
<span class="sd">            projections (bool, optional):</span>
<span class="sd">                If True, reset projections. Default: False.</span>
<span class="sd">            synapses (bool, optional):</span>
<span class="sd">                If True, reset synapses. Default: False.</span>
<span class="sd">            monitors (bool, optional):</span>
<span class="sd">                If True, reset ANNarchy monitors. Default: True.</span>
<span class="sd">            model (bool, optional):</span>
<span class="sd">                If True, reset model. Default: True.</span>
<span class="sd">            parameters (bool, optional):</span>
<span class="sd">                If True, reset the parameters of popilations and projections. Default:</span>
<span class="sd">                True.</span>
<span class="sd">            net_id (int, optional):</span>
<span class="sd">                Id of the network to reset. Default: 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### TODO rename this function to new_chunk() or something like that and let</span>
        <span class="c1">### recordings and recording times be returned</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_recording_times</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recordings</span> <span class="o">=</span> <span class="p">(</span>
            <span class="kc">False</span>  <span class="c1"># after reset one can still update recordings</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recording_times</span> <span class="o">=</span> <span class="p">(</span>
            <span class="kc">False</span>  <span class="c1"># after reset one can still update recording_times</span>
        <span class="p">)</span>

        <span class="c1">### reset timings, after reset, add a zero to start if the monitor is still</span>
        <span class="c1">### running (this is not resetted by reset())</span>
        <span class="c1">### if the model was not resetted --&gt; do add current time instead of zero</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;currently_paused&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">model</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">get_time</span><span class="p">(),</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">dt</span><span class="p">()))</span>
                    <span class="p">)</span>

        <span class="c1">### reset model</span>
        <span class="k">if</span> <span class="n">model</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="c1">### if parameters=False, get parameters before reset and set them after</span>
                <span class="c1">### reset</span>
                <span class="n">parameters_dict</span> <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">_get_all_parameters</span><span class="p">()</span>
            <span class="n">reset</span><span class="p">(</span><span class="n">populations</span><span class="p">,</span> <span class="n">projections</span><span class="p">,</span> <span class="n">synapses</span><span class="p">,</span> <span class="n">monitors</span><span class="p">,</span> <span class="n">net_id</span><span class="o">=</span><span class="n">net_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="c1">### if parameters=False, set parameters after reset</span>
                <span class="n">mf</span><span class="o">.</span><span class="n">_set_all_parameters</span><span class="p">(</span><span class="n">parameters_dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">current_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the index of the current chunk.</span>

<span class="sd">        Returns:</span>
<span class="sd">            current_chunk_idx (int):</span>
<span class="sd">                Index of the current chunk. If no recordings are currently active,</span>
<span class="sd">                returns None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### if recordings are currently active --&gt; return chunk in which these recordings will be saved</span>
        <span class="c1">### check if there are currently active recordings</span>
        <span class="n">active_recordings</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;currently_paused&quot;</span><span class="p">]):</span>
                <span class="c1">### tere are currently active recordings</span>
                <span class="n">active_recordings</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">active_recordings</span><span class="p">:</span>
            <span class="n">current_chunk_idx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recordings</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">current_chunk_idx</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">### if currently no recordings are active return None</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_recordings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get recordings of all recorded compartments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            recordings (list):</span>
<span class="sd">                List with recordings of all chunks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### only if recordings in current chunk and get_recodings was not already called add current chunk to recordings</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_any_recordings_in_current_chunk</span><span class="p">()</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recordings</span> <span class="ow">is</span> <span class="kc">False</span>
        <span class="p">):</span>
            <span class="c1">### update recordings</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recordings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_monitors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon</span><span class="p">))</span>
            <span class="c1">### upade already_got_recordings --&gt; it will not update recordings again</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recordings</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recordings</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;WARNING get_recordings: no recordings available, empty list returned. Maybe forgot start()?&quot;</span>
                    <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordings</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recordings</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;WARNING get_recordings: no recordings available, empty list returned. Maybe forgot start()?&quot;</span>
                    <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordings</span>

    <span class="k">def</span> <span class="nf">get_recording_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get recording times of all recorded compartments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            recording_times (recording_times_cl):</span>
<span class="sd">                Object with recording times of all chunks.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">temp_timings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_temp_timings</span><span class="p">()</span>

        <span class="c1">### only append temp_timings of current chunk if there are recordings in current chunk at all and if get_recordings was not already called (double call would add the same chunk again)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_any_recordings_in_current_chunk</span><span class="p">()</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recording_times</span> <span class="ow">is</span> <span class="kc">False</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recording_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_timings</span><span class="p">)</span>

        <span class="c1">### upade already_got_recording_times --&gt; it will not update recording_times again</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recording_times</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">### generate a object from recording_times and return this instead of the dict</span>
        <span class="n">recording_times_ob</span> <span class="o">=</span> <span class="n">RecordingTimes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;WARNING get_recording_times: no recordings available, empty list returned. Maybe forgot start()?&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">recording_times_ob</span>

    <span class="k">def</span> <span class="nf">get_recordings_and_clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The default get_recordings method should be called at the end of the simulation.</span>
<span class="sd">        The get_recordings_and_clear method allows to get several times recordings with</span>
<span class="sd">        the same monitor object and to simulate between the calls. Sets the internal</span>
<span class="sd">        variables back to their initial state. Usefull if you repeat a simulation +</span>
<span class="sd">        recording several times and you do not want to always create new chunks.</span>

<span class="sd">        !!! warning</span>
<span class="sd">            If you want to continue recording after calling this method, you have to</span>
<span class="sd">            call start() again.</span>

<span class="sd">        Returns:</span>
<span class="sd">            recordings (list):</span>
<span class="sd">                List with recordings of all chunks.</span>
<span class="sd">            recording_times (recording_times_cl):</span>
<span class="sd">                Object with recording times of all chunks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings</span><span class="p">()</span>
        <span class="n">ret1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recording_times</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_internals</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="n">ret0</span><span class="p">,</span> <span class="n">ret1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">_correct_start_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_time_arr</span><span class="p">,</span> <span class="n">stop_time_arr</span><span class="p">,</span> <span class="n">period</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Corrects the start and stop times of recordings to the actual start and stop</span>
<span class="sd">        times of recorded values.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_time_arr (np.array):</span>
<span class="sd">                Array with start times of recordings, obtained with get_time() function</span>
<span class="sd">                of ANNarchy.</span>
<span class="sd">            stop_time_arr (np.array):</span>
<span class="sd">                Array with stop times of recordings, obtained with get_time() function</span>
<span class="sd">                of ANNarchy.</span>
<span class="sd">            period (float):</span>
<span class="sd">                Time difference between recording values specified by the user.</span>

<span class="sd">        Returns:</span>
<span class="sd">            actual_start_time (np.array):</span>
<span class="sd">                Array with actual start times of recorded values.</span>
<span class="sd">            actual_stop_time (np.array):</span>
<span class="sd">                Array with actual stop times of recorded values.</span>
<span class="sd">            nr_rec_vals (np.array):</span>
<span class="sd">                Array with number of recorded values between start and stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># actual_period = int(period / dt()) * dt()</span>
        <span class="n">actual_start_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">start_time_arr</span> <span class="o">/</span> <span class="n">period</span><span class="p">)</span> <span class="o">*</span> <span class="n">period</span>

        <span class="n">actual_stop_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">stop_time_arr</span> <span class="o">/</span> <span class="n">period</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">period</span>

        <span class="n">nr_rec_vals</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">actual_stop_time</span> <span class="o">-</span> <span class="n">actual_start_time</span><span class="p">)</span> <span class="o">/</span> <span class="n">period</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">actual_start_time</span><span class="p">,</span> <span class="n">actual_stop_time</span><span class="p">,</span> <span class="n">nr_rec_vals</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_temp_timings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a timings dictionary with time lims and idx lims for each compartment.</span>
<span class="sd">        Calculates the idx lims of the recordings based on the time lims.</span>

<span class="sd">        Returns:</span>
<span class="sd">            temp_timings (dict):</span>
<span class="sd">                Dict with time lims and idx lims for each compartment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">temp_timings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span>
            <span class="p">):</span>
                <span class="c1">### was started/resumed but never stoped after --&gt; use current time for stop time</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_time</span><span class="p">())</span>
            <span class="c1">### calculate the idx of the recorded arrays which correspond to the timings and remove &#39;currently_paused&#39;</span>
            <span class="c1">### get for each start-stop pair the corrected start stop timings (when teh values were actually recorded, depends on period and timestep)</span>
            <span class="c1">### and also get the number of recorded values for start-stop pair</span>
            <span class="n">start_time_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">])</span>
            <span class="n">stop_time_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">])</span>
            <span class="p">(</span>
                <span class="n">start_time_arr</span><span class="p">,</span>
                <span class="n">stop_time_arr</span><span class="p">,</span>
                <span class="n">nr_rec_vals_arr</span><span class="p">,</span>
            <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correct_start_stop</span><span class="p">(</span><span class="n">start_time_arr</span><span class="p">,</span> <span class="n">stop_time_arr</span><span class="p">,</span> <span class="n">period</span><span class="p">)</span>

            <span class="c1">### with the number of recorded values -&gt; get start and end idx for each start-stop pair</span>
            <span class="n">start_idx</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">nr_rec_vals_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_rec_vals_arr</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">stop_idx</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">nr_rec_vals_arr</span><span class="p">[</span><span class="mi">0</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_rec_vals_arr</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="p">]</span>

            <span class="c1">### return start-stop pair info in timings format</span>
            <span class="n">temp_timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;ms&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
                        <span class="n">start_time_arr</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">dt</span><span class="p">())</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                    <span class="s2">&quot;idx&quot;</span><span class="p">:</span> <span class="n">start_idx</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;ms&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
                        <span class="n">stop_time_arr</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">dt</span><span class="p">())</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                    <span class="s2">&quot;idx&quot;</span><span class="p">:</span> <span class="n">stop_idx</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="n">temp_timings</span>

    <span class="k">def</span> <span class="nf">_any_recordings_in_current_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if there are any recordings in the current chunk.</span>

<span class="sd">        Returns:</span>
<span class="sd">            any_recordings (bool):</span>
<span class="sd">                True if there are any recordings in the current chunk, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">temp_timings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_temp_timings</span><span class="p">()</span>

        <span class="c1">### generate a temp object of temp timings to check if there were recordings at all</span>
        <span class="n">recording_times_ob_temp</span> <span class="o">=</span> <span class="n">RecordingTimes</span><span class="p">([</span><span class="n">temp_timings</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">recording_times_ob_temp</span><span class="o">.</span><span class="n">_any_recordings</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_monitors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate monitors defined by mon_dict.</span>

<span class="sd">        Args:</span>
<span class="sd">            mon_dict (dict):</span>
<span class="sd">                dict with key=&quot;compartment_name;period&quot; where period is optional and</span>
<span class="sd">                val=list with variables to record.</span>

<span class="sd">        Returns:</span>
<span class="sd">            mon (dict):</span>
<span class="sd">                dict with key=&quot;pop_name&quot; for populations and key=&quot;proj_name&quot; for</span>
<span class="sd">                projections and val=ANNarchy monitor object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mon</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">mon_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">compartmentType</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span>
                <span class="n">key</span><span class="p">,</span> <span class="n">warning</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="c1">### check if compartment is pop</span>
            <span class="k">if</span> <span class="n">compartmentType</span> <span class="o">==</span> <span class="s2">&quot;pop&quot;</span><span class="p">:</span>
                <span class="n">mon</span><span class="p">[</span><span class="n">compartment</span><span class="p">]</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">(</span>
                    <span class="n">get_population</span><span class="p">(</span><span class="n">compartment</span><span class="p">),</span> <span class="n">val</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span>
                <span class="p">)</span>
            <span class="c1">### check if compartment is proj</span>
            <span class="k">if</span> <span class="n">compartmentType</span> <span class="o">==</span> <span class="s2">&quot;proj&quot;</span><span class="p">:</span>
                <span class="n">mon</span><span class="p">[</span><span class="n">compartment</span><span class="p">]</span> <span class="o">=</span> <span class="n">Monitor</span><span class="p">(</span>
                    <span class="n">get_projection</span><span class="p">(</span><span class="n">compartment</span><span class="p">),</span> <span class="n">val</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">mon</span>

    <span class="k">def</span> <span class="nf">_start_monitors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compartment_list</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="n">timings</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts or resumes monitores defined by compartment_list.</span>

<span class="sd">        Args:</span>
<span class="sd">            compartment_list (list):</span>
<span class="sd">                List with compartment names to start or resume recording.</span>
<span class="sd">            mon (dict):</span>
<span class="sd">                Dict with key=&quot;pop_name&quot; for populations and key=&quot;proj_name&quot; for</span>
<span class="sd">                projections and val=ANNarchy monitor object.</span>
<span class="sd">            timings (dict, optional):</span>
<span class="sd">                timings variable of the CompNeuroMonitors object. Default: None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            timings (dict):</span>
<span class="sd">                timings variable of the CompNeuroMonitors object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### for each compartment generate started variable (because compartments can ocure multiple times if multiple variables of them are recorded --&gt; do not start same monitor multiple times)</span>
        <span class="n">started</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">compartment_list</span><span class="p">:</span>
            <span class="n">started</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">timings</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">### information about pauses not available, just start</span>
            <span class="k">for</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">compartment_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">started</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="n">mon</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">compartment_name</span><span class="p">)</span>
                    <span class="n">started</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">### information about pauses available, start if not paused, resume if paused</span>
            <span class="k">for</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">compartment_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">started</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">timings</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">][</span><span class="s2">&quot;currently_paused&quot;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="c1">### resume</span>
                            <span class="n">mon</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1">### initial start</span>
                            <span class="n">mon</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
                    <span class="n">started</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="c1">### update currently_paused</span>
                    <span class="n">timings</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">][</span><span class="s2">&quot;currently_paused&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="c1">### never make start longer than stop+1!... this can be caused if start is called multiple times without pause in between</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span>
                        <span class="n">timings</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span>
                    <span class="p">):</span>
                        <span class="n">timings</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_time</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">timings</span>

    <span class="k">def</span> <span class="nf">_pause_monitors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compartment_list</span><span class="p">,</span> <span class="n">mon</span><span class="p">,</span> <span class="n">timings</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pause monitores defined by compartment_list.</span>

<span class="sd">        Args:</span>
<span class="sd">            compartment_list (list):</span>
<span class="sd">                List with compartment names to pause recording.</span>
<span class="sd">            mon (dict):</span>
<span class="sd">                Dict with key=&quot;pop_name&quot; for populations and key=&quot;proj_name&quot; for</span>
<span class="sd">                projections and val=ANNarchy monitor object.</span>
<span class="sd">            timings (dict, optional):</span>
<span class="sd">                timings variable of the CompNeuroMonitors object. Default: None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            timings (dict):</span>
<span class="sd">                timings variable of the CompNeuroMonitors object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### for each compartment generate paused variable (because compartments can ocure multiple times if multiple variables of them are recorded --&gt; do not pause same monitor multiple times)</span>
        <span class="n">paused</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">compartment_list</span><span class="p">:</span>
            <span class="n">paused</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">compartment_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">paused</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">mon</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
                <span class="n">paused</span><span class="p">[</span><span class="n">compartment_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">timings</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">### information about pauses is available, update it</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">paused</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;currently_paused&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="c1">### never make pause longer than start, this can be caused if pause is called multiple times without start in between</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]):</span>
                    <span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_time</span><span class="p">())</span>
                <span class="c1">### if pause is directly called after start --&gt; start == stop --&gt; remove these entries, this is no actual period</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">len</span><span class="p">(</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">])</span>
                    <span class="ow">and</span> <span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">):</span>
                    <span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">timings</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_get_monitors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon_dict</span><span class="p">,</span> <span class="n">mon</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get recorded values from ANNarchy monitors defined by mon_dict.</span>

<span class="sd">        Args:</span>
<span class="sd">            mon_dict (dict):</span>
<span class="sd">                dict with key=&quot;compartment_name;period&quot; where period is optional and</span>
<span class="sd">                val=list with variables to record.</span>
<span class="sd">            mon (dict):</span>
<span class="sd">                Dict with key=&quot;pop_name&quot; for populations and key=&quot;proj_name&quot; for</span>
<span class="sd">                projections and val=ANNarchy monitor object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            recordings (dict):</span>
<span class="sd">                Dict with key=&quot;compartment_name;variable&quot; and val=list with recorded</span>
<span class="sd">                values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">recordings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">mon_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">compartment_type</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">recordings</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">compartment</span><span class="si">}</span><span class="s2">;period&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">period</span>
            <span class="k">if</span> <span class="n">compartment_type</span> <span class="o">==</span> <span class="s2">&quot;pop&quot;</span><span class="p">:</span>
                <span class="n">pop</span> <span class="o">=</span> <span class="n">get_population</span><span class="p">(</span><span class="n">compartment</span><span class="p">)</span>
                <span class="n">parameter_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">param_name</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">param_name</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">param_name</span> <span class="ow">in</span> <span class="n">pop</span><span class="o">.</span><span class="n">parameters</span>
                <span class="p">}</span>
                <span class="n">recordings</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">compartment</span><span class="si">}</span><span class="s2">;parameter_dict&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameter_dict</span>
            <span class="k">if</span> <span class="n">compartment_type</span> <span class="o">==</span> <span class="s2">&quot;proj&quot;</span><span class="p">:</span>
                <span class="n">proj</span> <span class="o">=</span> <span class="n">get_projection</span><span class="p">(</span><span class="n">compartment</span><span class="p">)</span>
                <span class="n">parameter_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">param_name</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">param_name</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">param_name</span> <span class="ow">in</span> <span class="n">proj</span><span class="o">.</span><span class="n">parameters</span>
                <span class="p">}</span>
                <span class="n">recordings</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">compartment</span><span class="si">}</span><span class="s2">;parameters&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameter_dict</span>
            <span class="k">for</span> <span class="n">val_val</span> <span class="ow">in</span> <span class="n">val</span><span class="p">:</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">mon</span><span class="p">[</span><span class="n">compartment</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">val_val</span><span class="p">)</span>
                <span class="n">recordings</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">compartment</span><span class="si">}</span><span class="s2">;</span><span class="si">{</span><span class="n">val_val</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
        <span class="n">recordings</span><span class="p">[</span><span class="s2">&quot;dt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">recordings</span>

    <span class="k">def</span> <span class="nf">_unpack_mon_dict_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">warning</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unpacks a string of the form &quot;compartment_name;period&quot; or</span>
<span class="sd">        &quot;compartment_name&quot; into its components. If period is not provided</span>
<span class="sd">        it is set to dt() for populations and dt()*1000 for projections.</span>

<span class="sd">        Args:</span>
<span class="sd">            s (str):</span>
<span class="sd">                String to be unpacked</span>
<span class="sd">            warning (bool, optional):</span>
<span class="sd">                If True, print warning if period is not provided for projections.</span>

<span class="sd">        Returns:</span>
<span class="sd">            compartment_type (str):</span>
<span class="sd">                Compartment type</span>
<span class="sd">            compartment_name (str):</span>
<span class="sd">                Compartment name</span>
<span class="sd">            period (float):</span>
<span class="sd">                Period of the compartment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### split string</span>
        <span class="n">splitted_s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>

        <span class="c1">### get name</span>
        <span class="n">compartment_name</span> <span class="o">=</span> <span class="n">splitted_s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1">### get type</span>
        <span class="n">pop_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">pop</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">populations</span><span class="p">()]</span>
        <span class="n">proj_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">proj</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">proj</span> <span class="ow">in</span> <span class="n">projections</span><span class="p">()]</span>
        <span class="k">if</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">pop_list</span> <span class="ow">and</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">proj_list</span><span class="p">:</span>
            <span class="c1">### raise error because name is in both lists</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;ERROR CompNeuroMonitors._unpack_mon_dict_keys(): compartment_name is both populaiton and projection&quot;</span>
            <span class="p">)</span>
            <span class="n">quit</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">pop_list</span><span class="p">:</span>
            <span class="n">compartment_type</span> <span class="o">=</span> <span class="s2">&quot;pop&quot;</span>
        <span class="k">elif</span> <span class="n">compartment_name</span> <span class="ow">in</span> <span class="n">proj_list</span><span class="p">:</span>
            <span class="n">compartment_type</span> <span class="o">=</span> <span class="s2">&quot;proj&quot;</span>

        <span class="c1">### get period</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splitted_s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">splitted_s</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pop&quot;</span><span class="p">:</span> <span class="n">dt</span><span class="p">(),</span> <span class="s2">&quot;proj&quot;</span><span class="p">:</span> <span class="n">dt</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">}[</span><span class="n">compartment_type</span><span class="p">]</span>
            <span class="c1">### print warning for compartment_type proj</span>
            <span class="k">if</span> <span class="n">compartment_type</span> <span class="o">==</span> <span class="s2">&quot;proj&quot;</span> <span class="ow">and</span> <span class="n">warning</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;WARNING CompNeuroMonitors: no period provided for projection </span><span class="si">{</span><span class="n">compartment_name</span><span class="si">}</span><span class="s2">, period set to </span><span class="si">{</span><span class="n">period</span><span class="si">}</span><span class="s2"> ms&quot;</span>
                <span class="p">)</span>
        <span class="n">period</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">period</span> <span class="o">/</span> <span class="n">dt</span><span class="p">())</span> <span class="o">*</span> <span class="n">dt</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">compartment_type</span><span class="p">,</span> <span class="n">compartment_name</span><span class="p">,</span> <span class="n">period</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.CompNeuroMonitors.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">mon_dict</span><span class="o">=</span><span class="p">{})</span></code>

<a href="#CompNeuroPy.monitors.CompNeuroMonitors.__init__" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Initialize CompNeuroMonitors object by creating ANNarchy monitors.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>mon_dict</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dict with key="compartment_name;period" where period is optional and
val=list with variables to record.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mon_dict</span><span class="o">=</span><span class="p">{}):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize CompNeuroMonitors object by creating ANNarchy monitors.</span>

<span class="sd">    Args:</span>
<span class="sd">        mon_dict (dict):</span>
<span class="sd">            dict with key=&quot;compartment_name;period&quot; where period is optional and</span>
<span class="sd">            val=list with variables to record.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_monitors</span><span class="p">(</span><span class="n">mon_dict</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span> <span class="o">=</span> <span class="n">mon_dict</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_init_internals</span><span class="p">(</span><span class="n">init_call</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.CompNeuroMonitors.start" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">start</span><span class="p">(</span><span class="n">compartment_list</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.CompNeuroMonitors.start" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Start or resume recording of all recorded compartments in compartment_list.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>compartment_list</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List with compartment names to start or resume recording. Default: None,
i.e., all compartments of initialized mon_dict are started or resumed.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@check_types</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compartment_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Start or resume recording of all recorded compartments in compartment_list.</span>

<span class="sd">    Args:</span>
<span class="sd">        compartment_list (list, optional):</span>
<span class="sd">            List with compartment names to start or resume recording. Default: None,</span>
<span class="sd">            i.e., all compartments of initialized mon_dict are started or resumed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">compartment_list</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mon_dict_key_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">compartment_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">mon_dict_key_list</span>
        <span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">timings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_monitors</span><span class="p">(</span><span class="n">compartment_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.CompNeuroMonitors.pause" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">pause</span><span class="p">(</span><span class="n">compartment_list</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.CompNeuroMonitors.pause" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Pause recording of all recorded compartments in compartment_list.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>compartment_list</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List with compartment names to pause recording. Default: None,
i.e., all compartments of initialized mon_dict are paused.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@check_types</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">pause</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compartment_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pause recording of all recorded compartments in compartment_list.</span>

<span class="sd">    Args:</span>
<span class="sd">        compartment_list (list, optional):</span>
<span class="sd">            List with compartment names to pause recording. Default: None,</span>
<span class="sd">            i.e., all compartments of initialized mon_dict are paused.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">compartment_list</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mon_dict_key_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">compartment_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">mon_dict_key_list</span>
        <span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">timings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pause_monitors</span><span class="p">(</span><span class="n">compartment_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.CompNeuroMonitors.reset" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">reset</span><span class="p">(</span><span class="n">populations</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">projections</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">synapses</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">monitors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">net_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.CompNeuroMonitors.reset" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Create a new recording chunk by getting recordings and recording times of the
current chunk and optionally resetting the model. Recordings are automatically
resumed in the new chunk if they are not paused.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>populations</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, reset populations. Default: True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>projections</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, reset projections. Default: False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>synapses</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, reset synapses. Default: False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>monitors</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, reset ANNarchy monitors. Default: True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>model</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, reset model. Default: True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>parameters</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, reset the parameters of popilations and projections. Default:
True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>net_id</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Id of the network to reset. Default: 0.</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reset</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">populations</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">projections</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">synapses</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">monitors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">net_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a new recording chunk by getting recordings and recording times of the</span>
<span class="sd">    current chunk and optionally resetting the model. Recordings are automatically</span>
<span class="sd">    resumed in the new chunk if they are not paused.</span>

<span class="sd">    Args:</span>
<span class="sd">        populations (bool, optional):</span>
<span class="sd">            If True, reset populations. Default: True.</span>
<span class="sd">        projections (bool, optional):</span>
<span class="sd">            If True, reset projections. Default: False.</span>
<span class="sd">        synapses (bool, optional):</span>
<span class="sd">            If True, reset synapses. Default: False.</span>
<span class="sd">        monitors (bool, optional):</span>
<span class="sd">            If True, reset ANNarchy monitors. Default: True.</span>
<span class="sd">        model (bool, optional):</span>
<span class="sd">            If True, reset model. Default: True.</span>
<span class="sd">        parameters (bool, optional):</span>
<span class="sd">            If True, reset the parameters of popilations and projections. Default:</span>
<span class="sd">            True.</span>
<span class="sd">        net_id (int, optional):</span>
<span class="sd">            Id of the network to reset. Default: 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">### TODO rename this function to new_chunk() or something like that and let</span>
    <span class="c1">### recordings and recording times be returned</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_recording_times</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recordings</span> <span class="o">=</span> <span class="p">(</span>
        <span class="kc">False</span>  <span class="c1"># after reset one can still update recordings</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recording_times</span> <span class="o">=</span> <span class="p">(</span>
        <span class="kc">False</span>  <span class="c1"># after reset one can still update recording_times</span>
    <span class="p">)</span>

    <span class="c1">### reset timings, after reset, add a zero to start if the monitor is still</span>
    <span class="c1">### running (this is not resetted by reset())</span>
    <span class="c1">### if the model was not resetted --&gt; do add current time instead of zero</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;currently_paused&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">model</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">get_time</span><span class="p">(),</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">dt</span><span class="p">()))</span>
                <span class="p">)</span>

    <span class="c1">### reset model</span>
    <span class="k">if</span> <span class="n">model</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="c1">### if parameters=False, get parameters before reset and set them after</span>
            <span class="c1">### reset</span>
            <span class="n">parameters_dict</span> <span class="o">=</span> <span class="n">mf</span><span class="o">.</span><span class="n">_get_all_parameters</span><span class="p">()</span>
        <span class="n">reset</span><span class="p">(</span><span class="n">populations</span><span class="p">,</span> <span class="n">projections</span><span class="p">,</span> <span class="n">synapses</span><span class="p">,</span> <span class="n">monitors</span><span class="p">,</span> <span class="n">net_id</span><span class="o">=</span><span class="n">net_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="c1">### if parameters=False, set parameters after reset</span>
            <span class="n">mf</span><span class="o">.</span><span class="n">_set_all_parameters</span><span class="p">(</span><span class="n">parameters_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.CompNeuroMonitors.current_chunk" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">current_chunk</span><span class="p">()</span></code>

<a href="#CompNeuroPy.monitors.CompNeuroMonitors.current_chunk" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the index of the current chunk.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>current_chunk_idx</code></td>          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Index of the current chunk. If no recordings are currently active,
returns None.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">current_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the index of the current chunk.</span>

<span class="sd">    Returns:</span>
<span class="sd">        current_chunk_idx (int):</span>
<span class="sd">            Index of the current chunk. If no recordings are currently active,</span>
<span class="sd">            returns None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">### if recordings are currently active --&gt; return chunk in which these recordings will be saved</span>
    <span class="c1">### check if there are currently active recordings</span>
    <span class="n">active_recordings</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unpack_mon_dict_keys</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timings</span><span class="p">[</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;currently_paused&quot;</span><span class="p">]):</span>
            <span class="c1">### tere are currently active recordings</span>
            <span class="n">active_recordings</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="n">active_recordings</span><span class="p">:</span>
        <span class="n">current_chunk_idx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recordings</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">current_chunk_idx</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">### if currently no recordings are active return None</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.CompNeuroMonitors.get_recordings" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_recordings</span><span class="p">()</span></code>

<a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recordings" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get recordings of all recorded compartments.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>recordings</code></td>          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List with recordings of all chunks.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_recordings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get recordings of all recorded compartments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        recordings (list):</span>
<span class="sd">            List with recordings of all chunks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">### only if recordings in current chunk and get_recodings was not already called add current chunk to recordings</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_any_recordings_in_current_chunk</span><span class="p">()</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recordings</span> <span class="ow">is</span> <span class="kc">False</span>
    <span class="p">):</span>
        <span class="c1">### update recordings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recordings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_monitors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mon_dict</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mon</span><span class="p">))</span>
        <span class="c1">### upade already_got_recordings --&gt; it will not update recordings again</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recordings</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recordings</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;WARNING get_recordings: no recordings available, empty list returned. Maybe forgot start()?&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordings</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recordings</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;WARNING get_recordings: no recordings available, empty list returned. Maybe forgot start()?&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recordings</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.CompNeuroMonitors.get_recording_times" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_recording_times</span><span class="p">()</span></code>

<a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recording_times" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get recording times of all recorded compartments.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>recording_times</code></td>          <td>
                <code><span title="CompNeuroPy.monitors.recording_times_cl">recording_times_cl</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Object with recording times of all chunks.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_recording_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get recording times of all recorded compartments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        recording_times (recording_times_cl):</span>
<span class="sd">            Object with recording times of all chunks.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">temp_timings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_temp_timings</span><span class="p">()</span>

    <span class="c1">### only append temp_timings of current chunk if there are recordings in current chunk at all and if get_recordings was not already called (double call would add the same chunk again)</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_any_recordings_in_current_chunk</span><span class="p">()</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recording_times</span> <span class="ow">is</span> <span class="kc">False</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recording_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_timings</span><span class="p">)</span>

    <span class="c1">### upade already_got_recording_times --&gt; it will not update recording_times again</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">already_got_recording_times</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1">### generate a object from recording_times and return this instead of the dict</span>
    <span class="n">recording_times_ob</span> <span class="o">=</span> <span class="n">RecordingTimes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_recordings_reset_call</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;WARNING get_recording_times: no recordings available, empty list returned. Maybe forgot start()?&quot;</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">recording_times_ob</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.CompNeuroMonitors.get_recordings_and_clear" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_recordings_and_clear</span><span class="p">()</span></code>

<a href="#CompNeuroPy.monitors.CompNeuroMonitors.get_recordings_and_clear" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>The default get_recordings method should be called at the end of the simulation.
The get_recordings_and_clear method allows to get several times recordings with
the same monitor object and to simulate between the calls. Sets the internal
variables back to their initial state. Usefull if you repeat a simulation +
recording several times and you do not want to always create new chunks.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you want to continue recording after calling this method, you have to
call start() again.</p>
</div>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>recordings</code></td>          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List with recordings of all chunks.</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>recording_times</code></td>          <td>
                <code><span title="CompNeuroPy.monitors.recording_times_cl">recording_times_cl</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Object with recording times of all chunks.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_recordings_and_clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The default get_recordings method should be called at the end of the simulation.</span>
<span class="sd">    The get_recordings_and_clear method allows to get several times recordings with</span>
<span class="sd">    the same monitor object and to simulate between the calls. Sets the internal</span>
<span class="sd">    variables back to their initial state. Usefull if you repeat a simulation +</span>
<span class="sd">    recording several times and you do not want to always create new chunks.</span>

<span class="sd">    !!! warning</span>
<span class="sd">        If you want to continue recording after calling this method, you have to</span>
<span class="sd">        call start() again.</span>

<span class="sd">    Returns:</span>
<span class="sd">        recordings (list):</span>
<span class="sd">            List with recordings of all chunks.</span>
<span class="sd">        recording_times (recording_times_cl):</span>
<span class="sd">            Object with recording times of all chunks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recordings</span><span class="p">()</span>
    <span class="n">ret1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recording_times</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_init_internals</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="n">ret0</span><span class="p">,</span> <span class="n">ret1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="CompNeuroPy.monitors.RecordingTimes" class="doc doc-heading">
          <code>CompNeuroPy.monitors.RecordingTimes</code>


<a href="#CompNeuroPy.monitors.RecordingTimes" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents first">


            <details class="quote">
              <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RecordingTimes</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recording_times_list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize RecordingTimes object.</span>

<span class="sd">        Args:</span>
<span class="sd">            recording_times_list (list):</span>
<span class="sd">                List with recording times of all chunks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span> <span class="o">=</span> <span class="n">recording_times_list</span>

    <span class="k">def</span> <span class="nf">time_lims</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">chunk</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">compartment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the time limits recordings of of a specified chunk/model compartment in ms.</span>

<span class="sd">        chunk (int, optional):</span>
<span class="sd">            Index of the chunk. Default: None, i.e., first chunk.</span>
<span class="sd">        compartment (str, optional):</span>
<span class="sd">            Name of the compartment. Default: None, i.e., first model compartment from</span>
<span class="sd">            monitor.</span>
<span class="sd">        period (int, optional):</span>
<span class="sd">            Index of the period. Default: None, i.e., all periods.</span>

<span class="sd">        Returns:</span>
<span class="sd">            lims (tuple):</span>
<span class="sd">                Tuple with start and stop time of the specified chunk/model compartment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">),</span> <span class="s2">&quot;ERROR time_lims(): No recordings/recording_times available.&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lims</span><span class="p">(</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">idx_lims</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">chunk</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">compartment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the index limits of recordings of a specified chunk/model compartment.</span>

<span class="sd">        chunk (int, optional):</span>
<span class="sd">            Index of the chunk. Default: None, i.e., first chunk.</span>
<span class="sd">        compartment (str, optional):</span>
<span class="sd">            Name of the compartment. Default: None, i.e., first model compartment from</span>
<span class="sd">            monitor.</span>
<span class="sd">        period (int, optional):</span>
<span class="sd">            Index of the period. Default: None, i.e., all periods.</span>

<span class="sd">        Returns:</span>
<span class="sd">            lims (tuple):</span>
<span class="sd">                Tuple with start and stop index of the specified chunk/model</span>
<span class="sd">                compartment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">),</span> <span class="s2">&quot;ERROR idx_lims(): No recordings/recording_times available.&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lims</span><span class="p">(</span><span class="s2">&quot;idx&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the recording times of all chunks, compartments, periods in ms and index.</span>

<span class="sd">        Returns:</span>
<span class="sd">            recording_times_list (list):</span>
<span class="sd">                List with recording times of all chunks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span>

    <span class="k">def</span> <span class="nf">nr_periods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the number of recording periods (start-pause) of a specified chunk/model</span>
<span class="sd">        compartment.</span>

<span class="sd">        Args:</span>
<span class="sd">            chunk (int, optional):</span>
<span class="sd">                Index of the chunk. Default: None, i.e., first chunk.</span>
<span class="sd">            compartment (str, optional):</span>
<span class="sd">                Name of the compartment. Default: None, i.e., first model compartment</span>
<span class="sd">                from monitor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            nr_periods (int):</span>
<span class="sd">                Number of recording periods (start-pause) of a specified chunk/model</span>
<span class="sd">                compartment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="n">compartment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_compartment__</span><span class="p">(</span><span class="n">compartment</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_periods</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">combine_periods</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">recordings</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">recording_data_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">chunk</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">fill</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Combines the data of all periods of a specified chunk/model compartment.</span>

<span class="sd">        Args:</span>
<span class="sd">            recordings (list):</span>
<span class="sd">                List with recordings of all chunks.</span>
<span class="sd">            recording_data_str (str):</span>
<span class="sd">                String specifying the compartment name and the variable to combine.</span>
<span class="sd">                Format: &quot;compartment_name;variable_name&quot;</span>
<span class="sd">            chunk (int, optional):</span>
<span class="sd">                Index of the chunk. Default: 0.</span>
<span class="sd">            fill (str|float, optional):</span>
<span class="sd">                How recording pauses should be filled. Can be &quot;none&quot; (no filling),</span>
<span class="sd">                &quot;nan&quot; (fill with nan), &quot;interpolate&quot; (interpolate with nearest) or a</span>
<span class="sd">                float (fill with this value). Default: &quot;none&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            time_arr (np.array):</span>
<span class="sd">                Array with time values in ms.</span>
<span class="sd">            data_arr (np.array):</span>
<span class="sd">                Array with the recorded variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">compartment</span> <span class="o">=</span> <span class="n">recording_data_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">period_time</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">compartment</span><span class="si">}</span><span class="s2">;period&quot;</span><span class="p">]</span>
        <span class="n">nr_periods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_periods</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">)</span>
        <span class="n">time_step</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;dt&quot;</span><span class="p">]</span>
        <span class="n">time_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">### get data arr</span>
        <span class="n">data_arr</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">recording_data_str</span><span class="p">]</span>

        <span class="c1">### get time arr</span>
        <span class="k">for</span> <span class="n">period</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_periods</span><span class="p">):</span>
            <span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_lims</span><span class="p">(</span>
                <span class="n">chunk</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span>
            <span class="p">)</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">time_step</span><span class="p">))</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">end_time</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">time_step</span><span class="p">))</span>
            <span class="n">times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">+</span> <span class="n">period_time</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">period_time</span><span class="p">)</span>
            <span class="n">time_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>
        <span class="n">time_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">time_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1">### fill gaps with nan or interpolate</span>
        <span class="k">if</span> <span class="n">fill</span> <span class="o">==</span> <span class="s2">&quot;nan&quot;</span><span class="p">:</span>
            <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">time_data_add_nan</span><span class="p">(</span>
                <span class="n">time_arr</span><span class="p">,</span>
                <span class="n">data_arr</span><span class="p">,</span>
                <span class="n">fill_time_step</span><span class="o">=</span><span class="n">period_time</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">fill</span> <span class="o">==</span> <span class="s2">&quot;interpolate&quot;</span><span class="p">:</span>
            <span class="n">full_time_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span>
                <span class="n">time_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">time_arr</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">period_time</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">period_time</span>
            <span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span><span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">data_arr</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">full_time_arr</span><span class="p">)</span>
            <span class="n">time_arr</span> <span class="o">=</span> <span class="n">full_time_arr</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fill</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">time_data_fill_gaps</span><span class="p">(</span>
                <span class="n">time_arr</span><span class="p">,</span>
                <span class="n">data_arr</span><span class="p">,</span>
                <span class="n">fill_time_step</span><span class="o">=</span><span class="n">period_time</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span>

    <span class="k">def</span> <span class="nf">combine_chunks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">recordings</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">recording_data_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;sequential&quot;</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Combines the data of all chunks of recordings. Time periods without recordings</span>
<span class="sd">        AT THE BEGINNING OF chunks or WITHIN chunks (i.e. recording pauses) are</span>
<span class="sd">        considered and filled with nan values.</span>

<span class="sd">        !!! warning</span>
<span class="sd">            If you use mode=&quot;consecutive&quot;: Missing recordings at the end of chunks</span>
<span class="sd">            (simulated but not recorded) are not considered, this leads to times which</span>
<span class="sd">            differ from the original simulation times (these time periods without</span>
<span class="sd">            recording are simply ignored)!</span>

<span class="sd">        Args:</span>
<span class="sd">            recordings (list):</span>
<span class="sd">                List with recordings of all chunks.</span>
<span class="sd">            recording_data_str (str):</span>
<span class="sd">                String specifying the compartment name and the variable to combine.</span>
<span class="sd">                Format: &quot;compartment_name;variable_name&quot;</span>
<span class="sd">            mode (str, optional):</span>
<span class="sd">                How should the time array be generated. Can be &quot;sequential&quot; or</span>
<span class="sd">                &quot;consecutive&quot;. Default: &quot;sequential&quot;.</span>
<span class="sd">                - &quot;sequential&quot;: each chunk starts at zero e.g.: [0,100] + [0,250] --&gt;</span>
<span class="sd">                    [0, 1, ..., 100, 0, 1, ..., 250]</span>
<span class="sd">                - &quot;consecutive&quot;: each chunk starts at the last stop time of the previous</span>
<span class="sd">                    chunk e.g.: [0,100] + [0,250] --&gt; [0, 1, ..., 100, 101, 102, ..., 350]</span>

<span class="sd">        Returns:</span>
<span class="sd">            time_arr (np.array):</span>
<span class="sd">                Array with time values in ms.</span>
<span class="sd">            data_arr (np.array):</span>
<span class="sd">                Array with the recorded variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">),</span> <span class="s2">&quot;ERROR combine_chunks(): No recordings/recording_times available.&quot;</span>

        <span class="n">compartment</span> <span class="o">=</span> <span class="n">recording_data_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">period_time</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">compartment</span><span class="si">}</span><span class="s2">;period&quot;</span><span class="p">]</span>
        <span class="n">time_step</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;dt&quot;</span><span class="p">]</span>
        <span class="n">nr_chunks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_chunks</span><span class="p">()</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">time_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pre_chunk_start_time</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_chunks</span><span class="p">):</span>
            <span class="c1">### append data list with data of all periods of this chunk</span>
            <span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recordings</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">recording_data_str</span><span class="p">])</span>

            <span class="c1">### nr of periods in this chunk</span>
            <span class="n">nr_periods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_periods</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">)</span>

            <span class="c1">### start time of chunk depends on mode</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;sequential&quot;</span><span class="p">:</span>
                <span class="n">chunk_start_time</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;consecutive&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">chunk</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">chunk_start_time</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1">### TODO this uses the wrong end time if there is a pause at the end</span>
                    <span class="c1">### of the last chunk but it is not possible to get the info how long</span>
                    <span class="c1">### nothing was recorded at the end of a chunk (all I save is from</span>
                    <span class="c1">### when to when something is recorded)</span>
                    <span class="n">last_stop_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">compartment</span><span class="p">][</span>
                        <span class="s2">&quot;stop&quot;</span>
                    <span class="p">][</span><span class="s2">&quot;ms&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">chunk_start_time</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">pre_chunk_start_time</span> <span class="o">+</span> <span class="n">last_stop_time</span> <span class="o">+</span> <span class="n">period_time</span>
                    <span class="p">)</span>
                    <span class="n">pre_chunk_start_time</span> <span class="o">=</span> <span class="n">chunk_start_time</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERROR recording_times.combine_data, Wrong mode.&quot;</span><span class="p">)</span>
                <span class="n">quit</span><span class="p">()</span>

            <span class="c1">### append the time list with all times of the periods</span>
            <span class="k">for</span> <span class="n">period</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_periods</span><span class="p">):</span>
                <span class="n">start_time</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">)[</span>
                        <span class="mi">0</span>
                    <span class="p">]</span>
                    <span class="o">+</span> <span class="n">chunk_start_time</span>
                <span class="p">)</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">)[</span>
                        <span class="mi">1</span>
                    <span class="p">]</span>
                    <span class="o">+</span> <span class="n">chunk_start_time</span>
                <span class="p">)</span>
                <span class="n">start_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">time_step</span><span class="p">))</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">end_time</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">time_step</span><span class="p">))</span>
                <span class="n">times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">+</span> <span class="n">period_time</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">period_time</span><span class="p">)</span>
                <span class="n">time_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>

        <span class="c1">### flatten the two lists</span>
        <span class="n">data_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">time_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">time_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1">### check if there are gaps in the time array</span>
        <span class="c1">### fill them with the corersponding times and</span>
        <span class="c1">### the data array with nan values</span>
        <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">time_data_add_nan</span><span class="p">(</span>
            <span class="n">time_arr</span><span class="p">,</span>
            <span class="n">data_arr</span><span class="p">,</span>
            <span class="n">fill_time_step</span><span class="o">=</span><span class="n">period_time</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span>

    <span class="k">def</span> <span class="nf">_lims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">chunk</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the limits of recordings of a specified chunk/model compartment.</span>

<span class="sd">        Args:</span>
<span class="sd">            string (str):</span>
<span class="sd">                String specifying the type of limits to return. Can be &quot;ms&quot; for time</span>
<span class="sd">                limits in ms or &quot;idx&quot; for index limits.</span>
<span class="sd">            chunk (int, optional):</span>
<span class="sd">                Index of the chunk. Default: None, i.e., first chunk.</span>
<span class="sd">            compartment (str, optional):</span>
<span class="sd">                Name of the compartment. Default: None, i.e., first model compartment</span>
<span class="sd">                from monitor.</span>
<span class="sd">            period (int, optional):</span>
<span class="sd">                Index of the period. Default: None, i.e., all periods.</span>

<span class="sd">        Returns:</span>
<span class="sd">            lims (tuple):</span>
<span class="sd">                Tuple with start and stop time/index of the specified chunk/model</span>
<span class="sd">                compartment.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="n">compartment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_compartment__</span><span class="p">(</span><span class="n">compartment</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
        <span class="n">period_0</span><span class="p">,</span> <span class="n">period_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_period</span><span class="p">(</span><span class="n">period</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">)</span>
        <span class="n">lims</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">][</span><span class="n">string</span><span class="p">][</span><span class="n">period_0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;stop&quot;</span><span class="p">][</span><span class="n">string</span><span class="p">][</span><span class="n">period_1</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">lims</span>

    <span class="k">def</span> <span class="nf">__check_compartment__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">chunk</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">compartment</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">### by default just use the first compartment</span>
            <span class="n">compartment</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">compartment</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">compartment</span> <span class="o">=</span> <span class="n">compartment</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">&#39;ERROR recording_times, given compartment &quot;&#39;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">compartment</span><span class="p">)</span>
                <span class="o">+</span> <span class="s1">&#39;&quot; not available&#39;</span>
            <span class="p">)</span>
            <span class="n">quit</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">compartment</span>

    <span class="k">def</span> <span class="nf">_check_period</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if period is given.</span>

<span class="sd">        Args:</span>
<span class="sd">            period (int, optional):</span>
<span class="sd">                Index of the period. Default: None, i.e., all periods.</span>
<span class="sd">            chunk (int):</span>
<span class="sd">                Index of the chunk.</span>
<span class="sd">            compartment (str):</span>
<span class="sd">                Name of the compartment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            period_0 (int):</span>
<span class="sd">                Index of the first period.</span>
<span class="sd">            period_1 (int):</span>
<span class="sd">                Index of the last period. If perios is given, period_0 == period_1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">period</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">### by default use all periods</span>
            <span class="n">period_0</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">period_1</span> <span class="o">=</span> <span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">period</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="n">period_0</span> <span class="o">=</span> <span class="n">period</span>
            <span class="n">period_1</span> <span class="o">=</span> <span class="n">period</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERROR recording_times, given period not available&quot;</span><span class="p">)</span>
            <span class="n">quit</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">period_0</span><span class="p">,</span> <span class="n">period_1</span>

    <span class="k">def</span> <span class="nf">_check_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if chunk is given.</span>

<span class="sd">        Args:</span>
<span class="sd">            chunk (int, optional):</span>
<span class="sd">                Index of the chunk. Default: None, i.e., first chunk.</span>

<span class="sd">        Returns:</span>
<span class="sd">            chunk (int):</span>
<span class="sd">                Index of the chunk.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">chunk</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">### by default use first chunk</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">chunk</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_chunks</span><span class="p">():</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="n">chunk</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERROR recording_times, given chunk not available&quot;</span><span class="p">)</span>
            <span class="n">quit</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">chunk</span>

    <span class="k">def</span> <span class="nf">_get_nr_chunks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the number of chunks of the recordings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            nr_chunks (int):</span>
<span class="sd">                Number of chunks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_nr_periods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the number of recording periods (start-pause) of a specified chunk/model</span>
<span class="sd">        compartment.</span>

<span class="sd">        Args:</span>
<span class="sd">            chunk (int):</span>
<span class="sd">                Index of the chunk.</span>
<span class="sd">            compartment (str):</span>
<span class="sd">                Name of the compartment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            nr_periods (int):</span>
<span class="sd">                Number of recording periods (start-pause) of a specified chunk/model</span>
<span class="sd">                compartment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_any_recordings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check all periods and compartments if there are any recordings.</span>

<span class="sd">        Args:</span>
<span class="sd">            chunk (int):</span>
<span class="sd">                Index of the chunk.</span>

<span class="sd">        Returns:</span>
<span class="sd">            found_recordings (bool):</span>
<span class="sd">                True if there are any recordings in the chunk, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">compartment_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">found_recordings</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">compartment</span> <span class="ow">in</span> <span class="n">compartment_list</span><span class="p">:</span>
            <span class="n">nr_periods_of_compartment</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">compartment</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">period_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_periods_of_compartment</span><span class="p">):</span>
                <span class="n">idx_lims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idx_lims</span><span class="p">(</span>
                    <span class="n">chunk</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period_idx</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">idx_lims</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">found_recordings</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">found_recordings</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.RecordingTimes.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">recording_times_list</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.RecordingTimes.__init__" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Initialize RecordingTimes object.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recording_times_list</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List with recording times of all chunks.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recording_times_list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize RecordingTimes object.</span>

<span class="sd">    Args:</span>
<span class="sd">        recording_times_list (list):</span>
<span class="sd">            List with recording times of all chunks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span> <span class="o">=</span> <span class="n">recording_times_list</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.RecordingTimes.time_lims" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">time_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.RecordingTimes.time_lims" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the time limits recordings of of a specified chunk/model compartment in ms.</p>
<p>chunk (int, optional):
    Index of the chunk. Default: None, i.e., first chunk.
compartment (str, optional):
    Name of the compartment. Default: None, i.e., first model compartment from
    monitor.
period (int, optional):
    Index of the period. Default: None, i.e., all periods.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>lims</code></td>          <td>
                <code>tuple</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Tuple with start and stop time of the specified chunk/model compartment.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">time_lims</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">chunk</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">compartment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the time limits recordings of of a specified chunk/model compartment in ms.</span>

<span class="sd">    chunk (int, optional):</span>
<span class="sd">        Index of the chunk. Default: None, i.e., first chunk.</span>
<span class="sd">    compartment (str, optional):</span>
<span class="sd">        Name of the compartment. Default: None, i.e., first model compartment from</span>
<span class="sd">        monitor.</span>
<span class="sd">    period (int, optional):</span>
<span class="sd">        Index of the period. Default: None, i.e., all periods.</span>

<span class="sd">    Returns:</span>
<span class="sd">        lims (tuple):</span>
<span class="sd">            Tuple with start and stop time of the specified chunk/model compartment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="p">),</span> <span class="s2">&quot;ERROR time_lims(): No recordings/recording_times available.&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lims</span><span class="p">(</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.RecordingTimes.idx_lims" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">idx_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.RecordingTimes.idx_lims" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the index limits of recordings of a specified chunk/model compartment.</p>
<p>chunk (int, optional):
    Index of the chunk. Default: None, i.e., first chunk.
compartment (str, optional):
    Name of the compartment. Default: None, i.e., first model compartment from
    monitor.
period (int, optional):
    Index of the period. Default: None, i.e., all periods.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>lims</code></td>          <td>
                <code>tuple</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Tuple with start and stop index of the specified chunk/model
compartment.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">idx_lims</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">chunk</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">compartment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the index limits of recordings of a specified chunk/model compartment.</span>

<span class="sd">    chunk (int, optional):</span>
<span class="sd">        Index of the chunk. Default: None, i.e., first chunk.</span>
<span class="sd">    compartment (str, optional):</span>
<span class="sd">        Name of the compartment. Default: None, i.e., first model compartment from</span>
<span class="sd">        monitor.</span>
<span class="sd">    period (int, optional):</span>
<span class="sd">        Index of the period. Default: None, i.e., all periods.</span>

<span class="sd">    Returns:</span>
<span class="sd">        lims (tuple):</span>
<span class="sd">            Tuple with start and stop index of the specified chunk/model</span>
<span class="sd">            compartment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="p">),</span> <span class="s2">&quot;ERROR idx_lims(): No recordings/recording_times available.&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lims</span><span class="p">(</span><span class="s2">&quot;idx&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.RecordingTimes.all" class="doc doc-heading">
          <code class="highlight language-python"><span class="nb">all</span><span class="p">()</span></code>

<a href="#CompNeuroPy.monitors.RecordingTimes.all" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the recording times of all chunks, compartments, periods in ms and index.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>recording_times_list</code></td>          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List with recording times of all chunks.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the recording times of all chunks, compartments, periods in ms and index.</span>

<span class="sd">    Returns:</span>
<span class="sd">        recording_times_list (list):</span>
<span class="sd">            List with recording times of all chunks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.RecordingTimes.nr_periods" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">nr_periods</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.RecordingTimes.nr_periods" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the number of recording periods (start-pause) of a specified chunk/model
compartment.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>chunk</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Index of the chunk. Default: None, i.e., first chunk.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>compartment</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the compartment. Default: None, i.e., first model compartment
from monitor.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>nr_periods</code></td>          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Number of recording periods (start-pause) of a specified chunk/model
compartment.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">nr_periods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the number of recording periods (start-pause) of a specified chunk/model</span>
<span class="sd">    compartment.</span>

<span class="sd">    Args:</span>
<span class="sd">        chunk (int, optional):</span>
<span class="sd">            Index of the chunk. Default: None, i.e., first chunk.</span>
<span class="sd">        compartment (str, optional):</span>
<span class="sd">            Name of the compartment. Default: None, i.e., first model compartment</span>
<span class="sd">            from monitor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        nr_periods (int):</span>
<span class="sd">            Number of recording periods (start-pause) of a specified chunk/model</span>
<span class="sd">            compartment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="n">compartment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_compartment__</span><span class="p">(</span><span class="n">compartment</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_periods</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.RecordingTimes.combine_periods" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">combine_periods</span><span class="p">(</span><span class="n">recordings</span><span class="p">,</span> <span class="n">recording_data_str</span><span class="p">,</span> <span class="n">chunk</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.RecordingTimes.combine_periods" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Combines the data of all periods of a specified chunk/model compartment.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recordings</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List with recordings of all chunks.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recording_data_str</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>String specifying the compartment name and the variable to combine.
Format: "compartment_name;variable_name"</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>chunk</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Index of the chunk. Default: 0.</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>fill</code></td>
          <td>
                <code>str | float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>How recording pauses should be filled. Can be "none" (no filling),
"nan" (fill with nan), "interpolate" (interpolate with nearest) or a
float (fill with this value). Default: "none".</p>
            </div>
          </td>
          <td>
                <code>&#39;none&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>time_arr</code></td>          <td>
                <code><span title="numpy.array">array</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Array with time values in ms.</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>data_arr</code></td>          <td>
                <code><span title="numpy.array">array</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Array with the recorded variable.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">combine_periods</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">recordings</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
    <span class="n">recording_data_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">chunk</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">fill</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Combines the data of all periods of a specified chunk/model compartment.</span>

<span class="sd">    Args:</span>
<span class="sd">        recordings (list):</span>
<span class="sd">            List with recordings of all chunks.</span>
<span class="sd">        recording_data_str (str):</span>
<span class="sd">            String specifying the compartment name and the variable to combine.</span>
<span class="sd">            Format: &quot;compartment_name;variable_name&quot;</span>
<span class="sd">        chunk (int, optional):</span>
<span class="sd">            Index of the chunk. Default: 0.</span>
<span class="sd">        fill (str|float, optional):</span>
<span class="sd">            How recording pauses should be filled. Can be &quot;none&quot; (no filling),</span>
<span class="sd">            &quot;nan&quot; (fill with nan), &quot;interpolate&quot; (interpolate with nearest) or a</span>
<span class="sd">            float (fill with this value). Default: &quot;none&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        time_arr (np.array):</span>
<span class="sd">            Array with time values in ms.</span>
<span class="sd">        data_arr (np.array):</span>
<span class="sd">            Array with the recorded variable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">compartment</span> <span class="o">=</span> <span class="n">recording_data_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">period_time</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">compartment</span><span class="si">}</span><span class="s2">;period&quot;</span><span class="p">]</span>
    <span class="n">nr_periods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_periods</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">)</span>
    <span class="n">time_step</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;dt&quot;</span><span class="p">]</span>
    <span class="n">time_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1">### get data arr</span>
    <span class="n">data_arr</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">recording_data_str</span><span class="p">]</span>

    <span class="c1">### get time arr</span>
    <span class="k">for</span> <span class="n">period</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_periods</span><span class="p">):</span>
        <span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_lims</span><span class="p">(</span>
            <span class="n">chunk</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span>
        <span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">time_step</span><span class="p">))</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">end_time</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">time_step</span><span class="p">))</span>
        <span class="n">times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">+</span> <span class="n">period_time</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">period_time</span><span class="p">)</span>
        <span class="n">time_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>
    <span class="n">time_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">time_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1">### fill gaps with nan or interpolate</span>
    <span class="k">if</span> <span class="n">fill</span> <span class="o">==</span> <span class="s2">&quot;nan&quot;</span><span class="p">:</span>
        <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">time_data_add_nan</span><span class="p">(</span>
            <span class="n">time_arr</span><span class="p">,</span>
            <span class="n">data_arr</span><span class="p">,</span>
            <span class="n">fill_time_step</span><span class="o">=</span><span class="n">period_time</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">fill</span> <span class="o">==</span> <span class="s2">&quot;interpolate&quot;</span><span class="p">:</span>
        <span class="n">full_time_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span>
            <span class="n">time_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">time_arr</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">period_time</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">period_time</span>
        <span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span><span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">data_arr</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">full_time_arr</span><span class="p">)</span>
        <span class="n">time_arr</span> <span class="o">=</span> <span class="n">full_time_arr</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fill</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">time_data_fill_gaps</span><span class="p">(</span>
            <span class="n">time_arr</span><span class="p">,</span>
            <span class="n">data_arr</span><span class="p">,</span>
            <span class="n">fill_time_step</span><span class="o">=</span><span class="n">period_time</span><span class="p">,</span>
            <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.monitors.RecordingTimes.combine_chunks" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">combine_chunks</span><span class="p">(</span><span class="n">recordings</span><span class="p">,</span> <span class="n">recording_data_str</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;sequential&#39;</span><span class="p">)</span></code>

<a href="#CompNeuroPy.monitors.RecordingTimes.combine_chunks" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Combines the data of all chunks of recordings. Time periods without recordings
AT THE BEGINNING OF chunks or WITHIN chunks (i.e. recording pauses) are
considered and filled with nan values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use mode="consecutive": Missing recordings at the end of chunks
(simulated but not recorded) are not considered, this leads to times which
differ from the original simulation times (these time periods without
recording are simply ignored)!</p>
</div>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recordings</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List with recordings of all chunks.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recording_data_str</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>String specifying the compartment name and the variable to combine.
Format: "compartment_name;variable_name"</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>mode</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>How should the time array be generated. Can be "sequential" or
"consecutive". Default: "sequential".
- "sequential": each chunk starts at zero e.g.: [0,100] + [0,250] --&gt;
    [0, 1, ..., 100, 0, 1, ..., 250]
- "consecutive": each chunk starts at the last stop time of the previous
    chunk e.g.: [0,100] + [0,250] --&gt; [0, 1, ..., 100, 101, 102, ..., 350]</p>
            </div>
          </td>
          <td>
                <code>&#39;sequential&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>time_arr</code></td>          <td>
                <code><span title="numpy.array">array</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Array with time values in ms.</p>
            </div>
          </td>
        </tr>
        <tr>
<td><code>data_arr</code></td>          <td>
                <code><span title="numpy.array">array</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Array with the recorded variable.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/monitors.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">combine_chunks</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">recordings</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">recording_data_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;sequential&quot;</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Combines the data of all chunks of recordings. Time periods without recordings</span>
<span class="sd">    AT THE BEGINNING OF chunks or WITHIN chunks (i.e. recording pauses) are</span>
<span class="sd">    considered and filled with nan values.</span>

<span class="sd">    !!! warning</span>
<span class="sd">        If you use mode=&quot;consecutive&quot;: Missing recordings at the end of chunks</span>
<span class="sd">        (simulated but not recorded) are not considered, this leads to times which</span>
<span class="sd">        differ from the original simulation times (these time periods without</span>
<span class="sd">        recording are simply ignored)!</span>

<span class="sd">    Args:</span>
<span class="sd">        recordings (list):</span>
<span class="sd">            List with recordings of all chunks.</span>
<span class="sd">        recording_data_str (str):</span>
<span class="sd">            String specifying the compartment name and the variable to combine.</span>
<span class="sd">            Format: &quot;compartment_name;variable_name&quot;</span>
<span class="sd">        mode (str, optional):</span>
<span class="sd">            How should the time array be generated. Can be &quot;sequential&quot; or</span>
<span class="sd">            &quot;consecutive&quot;. Default: &quot;sequential&quot;.</span>
<span class="sd">            - &quot;sequential&quot;: each chunk starts at zero e.g.: [0,100] + [0,250] --&gt;</span>
<span class="sd">                [0, 1, ..., 100, 0, 1, ..., 250]</span>
<span class="sd">            - &quot;consecutive&quot;: each chunk starts at the last stop time of the previous</span>
<span class="sd">                chunk e.g.: [0,100] + [0,250] --&gt; [0, 1, ..., 100, 101, 102, ..., 350]</span>

<span class="sd">    Returns:</span>
<span class="sd">        time_arr (np.array):</span>
<span class="sd">            Array with time values in ms.</span>
<span class="sd">        data_arr (np.array):</span>
<span class="sd">            Array with the recorded variable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="p">),</span> <span class="s2">&quot;ERROR combine_chunks(): No recordings/recording_times available.&quot;</span>

    <span class="n">compartment</span> <span class="o">=</span> <span class="n">recording_data_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">period_time</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">compartment</span><span class="si">}</span><span class="s2">;period&quot;</span><span class="p">]</span>
    <span class="n">time_step</span> <span class="o">=</span> <span class="n">recordings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;dt&quot;</span><span class="p">]</span>
    <span class="n">nr_chunks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_chunks</span><span class="p">()</span>
    <span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">time_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">pre_chunk_start_time</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_chunks</span><span class="p">):</span>
        <span class="c1">### append data list with data of all periods of this chunk</span>
        <span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recordings</span><span class="p">[</span><span class="n">chunk</span><span class="p">][</span><span class="n">recording_data_str</span><span class="p">])</span>

        <span class="c1">### nr of periods in this chunk</span>
        <span class="n">nr_periods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nr_periods</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="p">)</span>

        <span class="c1">### start time of chunk depends on mode</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;sequential&quot;</span><span class="p">:</span>
            <span class="n">chunk_start_time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;consecutive&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">chunk</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">chunk_start_time</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">### TODO this uses the wrong end time if there is a pause at the end</span>
                <span class="c1">### of the last chunk but it is not possible to get the info how long</span>
                <span class="c1">### nothing was recorded at the end of a chunk (all I save is from</span>
                <span class="c1">### when to when something is recorded)</span>
                <span class="n">last_stop_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recording_times_list</span><span class="p">[</span><span class="n">chunk</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">compartment</span><span class="p">][</span>
                    <span class="s2">&quot;stop&quot;</span>
                <span class="p">][</span><span class="s2">&quot;ms&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">chunk_start_time</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">pre_chunk_start_time</span> <span class="o">+</span> <span class="n">last_stop_time</span> <span class="o">+</span> <span class="n">period_time</span>
                <span class="p">)</span>
                <span class="n">pre_chunk_start_time</span> <span class="o">=</span> <span class="n">chunk_start_time</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERROR recording_times.combine_data, Wrong mode.&quot;</span><span class="p">)</span>
            <span class="n">quit</span><span class="p">()</span>

        <span class="c1">### append the time list with all times of the periods</span>
        <span class="k">for</span> <span class="n">period</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_periods</span><span class="p">):</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">time_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">)[</span>
                    <span class="mi">0</span>
                <span class="p">]</span>
                <span class="o">+</span> <span class="n">chunk_start_time</span>
            <span class="p">)</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">time_lims</span><span class="p">(</span><span class="n">chunk</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span> <span class="n">compartment</span><span class="o">=</span><span class="n">compartment</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">)[</span>
                    <span class="mi">1</span>
                <span class="p">]</span>
                <span class="o">+</span> <span class="n">chunk_start_time</span>
            <span class="p">)</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">time_step</span><span class="p">))</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">end_time</span><span class="p">,</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">time_step</span><span class="p">))</span>
            <span class="n">times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">+</span> <span class="n">period_time</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">period_time</span><span class="p">)</span>
            <span class="n">time_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>

    <span class="c1">### flatten the two lists</span>
    <span class="n">data_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">time_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">time_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1">### check if there are gaps in the time array</span>
    <span class="c1">### fill them with the corersponding times and</span>
    <span class="c1">### the data array with nan values</span>
    <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">time_data_add_nan</span><span class="p">(</span>
        <span class="n">time_arr</span><span class="p">,</span>
        <span class="n">data_arr</span><span class="p">,</span>
        <span class="n">fill_time_step</span><span class="o">=</span><span class="n">period_time</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">time_arr</span><span class="p">,</span> <span class="n">data_arr</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Oliver Maith
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
    
  </body>
</html>