
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://olimaol.github.io/CompNeuroPy/1.1.0/additional/simulation_functions/">
      
      
        <link rel="prev" href="../../built_in/synapse_models/">
      
      
        <link rel="next" href="../simulation_requirements/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.35">
    
    
      
        <title>Simulation Functions - CompNeuroPy</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#CompNeuroPy.simulation_functions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CompNeuroPy" class="md-header__button md-logo" aria-label="CompNeuroPy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CompNeuroPy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Simulation Functions
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Olimaol/CompNeuroPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CompNeuroPy" class="md-nav__button md-logo" aria-label="CompNeuroPy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CompNeuroPy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Olimaol/CompNeuroPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Main Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Main Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/generate_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/generate_simulations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Simulations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/monitors_recordings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitors / Recordings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/optimize_neuron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimize a neuron model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/define_experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Define Experiments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/dbs_stimulator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DBS Stimulator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/model_configurator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Configurator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Built-in Models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Built-in Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Full Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/neuron_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neuron Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/synapse_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synapse Models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Additional Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Additional Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Simulation Functions
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Simulation Functions
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions" class="md-nav__link">
    <span class="md-ellipsis">
      simulation_functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.SimulationEvents" class="md-nav__link">
    <span class="md-ellipsis">
      SimulationEvents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SimulationEvents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.SimulationEvents.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.SimulationEvents.add_event" class="md-nav__link">
    <span class="md-ellipsis">
      add_event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.SimulationEvents.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.attr_sim" class="md-nav__link">
    <span class="md-ellipsis">
      attr_sim
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.attribute_step" class="md-nav__link">
    <span class="md-ellipsis">
      attribute_step
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.attr_ramp" class="md-nav__link">
    <span class="md-ellipsis">
      attr_ramp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.increasing_attr" class="md-nav__link">
    <span class="md-ellipsis">
      increasing_attr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.current_step" class="md-nav__link">
    <span class="md-ellipsis">
      current_step
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.current_stim" class="md-nav__link">
    <span class="md-ellipsis">
      current_stim
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.current_ramp" class="md-nav__link">
    <span class="md-ellipsis">
      current_ramp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.increasing_current" class="md-nav__link">
    <span class="md-ellipsis">
      increasing_current
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../simulation_requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simulation Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../analysis_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Analysis Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extra_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extra Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../statistic_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Statistic Functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/generate_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/run_and_monitor_simulations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Simulations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/monitor_recordings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitor Recordings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/plot_recordings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plot Recordings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Define Experiments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/dbs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DBS Simulator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/opt_neuron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimize a neuron model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/deap_cma/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cma Optimization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions" class="md-nav__link">
    <span class="md-ellipsis">
      simulation_functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.SimulationEvents" class="md-nav__link">
    <span class="md-ellipsis">
      SimulationEvents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SimulationEvents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.SimulationEvents.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.SimulationEvents.add_event" class="md-nav__link">
    <span class="md-ellipsis">
      add_event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.SimulationEvents.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.attr_sim" class="md-nav__link">
    <span class="md-ellipsis">
      attr_sim
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.attribute_step" class="md-nav__link">
    <span class="md-ellipsis">
      attribute_step
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.attr_ramp" class="md-nav__link">
    <span class="md-ellipsis">
      attr_ramp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.increasing_attr" class="md-nav__link">
    <span class="md-ellipsis">
      increasing_attr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.current_step" class="md-nav__link">
    <span class="md-ellipsis">
      current_step
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.current_stim" class="md-nav__link">
    <span class="md-ellipsis">
      current_stim
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.current_ramp" class="md-nav__link">
    <span class="md-ellipsis">
      current_ramp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.simulation_functions.increasing_current" class="md-nav__link">
    <span class="md-ellipsis">
      increasing_current
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Simulation Functions</h1>

<div class="doc doc-object doc-module">



<a id="CompNeuroPy.simulation_functions"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="CompNeuroPy.simulation_functions.SimulationEvents" class="doc doc-heading">
            <code>SimulationEvents</code>


<a href="#CompNeuroPy.simulation_functions.SimulationEvents" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">


        <p>Class to create a Simulation consiting of multiple events. Add the effects
(functions) of the events in a class which inherits from SimulationEvents. Within
the effect functions you can use the attributes of the class which inherits from
SimulationEvents. Do never simulate within the effect functions of the events. The
simulation is done between the events.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The onset of events and trigger times should be given in simulation steps (not
in ms). The 'end' event has to be triggered to end the simulation (otherwise
it will be triggered right at the beginning).</p>
</div>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">CompNeuroPy</span> <span class="kn">import</span> <span class="n">SimulationEvents</span>

<span class="c1">### define a class which inherits from SimulationEvents</span>
<span class="c1">### define the effects of the events in the class</span>
<span class="k">class</span> <span class="nc">MySim</span><span class="p">(</span><span class="n">SimulationEvents</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
        <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1">### set attributes which should be used in the effect functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">effect1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">### set the parameter of a population to the value of p</span>
        <span class="n">pop</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span>

    <span class="k">def</span> <span class="nf">effect2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">### set the parameter of a population to 0</span>
        <span class="n">pop</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">### create the simulation object</span>
<span class="n">my_sim</span> <span class="o">=</span> <span class="n">MySim</span><span class="p">()</span>

<span class="c1">### add events to the simulation</span>
<span class="c1">### start event right at the beginning which triggers event1 after 100 ms</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="n">trigger</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;event1&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">})</span>
<span class="c1">### event1 causes effect1 and triggers event2 after 200 ms</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;event1&quot;</span><span class="p">,</span> <span class="n">effect</span><span class="o">=</span><span class="n">my_sim</span><span class="o">.</span><span class="n">effect1</span><span class="p">,</span> <span class="n">trigger</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;event2&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">})</span>
<span class="c1">### event2 causes effect2 and triggers end event after 300 ms</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;event2&quot;</span><span class="p">,</span> <span class="n">effect</span><span class="o">=</span><span class="n">my_sim</span><span class="o">.</span><span class="n">effect2</span><span class="p">,</span> <span class="n">trigger</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">})</span>

<span class="c1">### run the simulation</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
</details>
              <details class="quote">
                <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SimulationEvents</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to create a Simulation consiting of multiple events. Add the effects</span>
<span class="sd">    (functions) of the events in a class which inherits from SimulationEvents. Within</span>
<span class="sd">    the effect functions you can use the attributes of the class which inherits from</span>
<span class="sd">    SimulationEvents. Do never simulate within the effect functions of the events. The</span>
<span class="sd">    simulation is done between the events.</span>

<span class="sd">    !!! warning</span>
<span class="sd">        The onset of events and trigger times should be given in simulation steps (not</span>
<span class="sd">        in ms). The &#39;end&#39; event has to be triggered to end the simulation (otherwise</span>
<span class="sd">        it will be triggered right at the beginning).</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from CompNeuroPy import SimulationEvents</span>

<span class="sd">        ### define a class which inherits from SimulationEvents</span>
<span class="sd">        ### define the effects of the events in the class</span>
<span class="sd">        class MySim(SimulationEvents):</span>

<span class="sd">            def __init__(</span>
<span class="sd">                self,</span>
<span class="sd">                p=0.8,</span>
<span class="sd">                verbose=False,</span>
<span class="sd">            ):</span>
<span class="sd">                ### set attributes which should be used in the effect functions</span>
<span class="sd">                self.p = p</span>
<span class="sd">                super().__init__(verbose=verbose)</span>

<span class="sd">            def effect1(self):</span>
<span class="sd">                ### set the parameter of a population to the value of p</span>
<span class="sd">                pop.parameter = self.p</span>

<span class="sd">            def effect2(self):</span>
<span class="sd">                ### set the parameter of a population to 0</span>
<span class="sd">                pop.parameter = 0</span>

<span class="sd">        ### create the simulation object</span>
<span class="sd">        my_sim = MySim()</span>

<span class="sd">        ### add events to the simulation</span>
<span class="sd">        ### start event right at the beginning which triggers event1 after 100 ms</span>
<span class="sd">        my_sim.add_event(name=&quot;start&quot;, trigger={&quot;event1&quot;: 100})</span>
<span class="sd">        ### event1 causes effect1 and triggers event2 after 200 ms</span>
<span class="sd">        my_sim.add_event(name=&quot;event1&quot;, effect=my_sim.effect1, trigger={&quot;event2&quot;: 200})</span>
<span class="sd">        ### event2 causes effect2 and triggers end event after 300 ms</span>
<span class="sd">        my_sim.add_event(name=&quot;event2&quot;, effect=my_sim.effect2, trigger={&quot;end&quot;: 300})</span>

<span class="sd">        ### run the simulation</span>
<span class="sd">        my_sim.run()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            verbose (bool):</span>
<span class="sd">                if True, additional information is printed during simulation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### set verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="c1">### initialize events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize</span><span class="p">()</span>
        <span class="c1">### list for storing added events, without changing them</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stored_event_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_during_restore</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">### add the end event</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">effect</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_end_sim</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        initialize locals</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;initialize locals&quot;</span><span class="p">)</span>
        <span class="c1">### list of events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_name_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">### as long as end == False simulation runs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">### if events occur depends on happened events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">happened_event_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">### initialize model triggers empty, before first simulation, there should not be model_trigger_events</span>
        <span class="c1">### model_trigger_list = name of populations of which the decision should be checked</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">past_model_trigger_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">add_event</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">onset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">model_trigger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">requirement_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">effect</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">trigger</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an event to the simulation. You always have to trigger the end event to end</span>
<span class="sd">        the simulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                name of the event</span>
<span class="sd">            onset (int):</span>
<span class="sd">                time in simulation steps when the event should occur</span>
<span class="sd">            model_trigger (str):</span>
<span class="sd">                name of population which can trigger the event (by setting variable</span>
<span class="sd">                decision to -1)</span>
<span class="sd">            requirement_string (str):</span>
<span class="sd">                string containing the requirements for the event to occur TODO: replace with function</span>
<span class="sd">            effect (function):</span>
<span class="sd">                Function which is executed during the event. Within the effect function</span>
<span class="sd">                you can use the attributes of the class which inherits from</span>
<span class="sd">                SimulationEvents.</span>
<span class="sd">            trigger (dict):</span>
<span class="sd">                dictionary containing the names of other events as keys and the</span>
<span class="sd">                relative time in simulation steps to the onset of the current event as</span>
<span class="sd">                values. The values can also be callable functions which return the</span>
<span class="sd">                time (without any aruments). They are called when this event is triggered.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_Event</span><span class="p">(</span>
                <span class="n">trial_procedure</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">onset</span><span class="o">=</span><span class="n">onset</span><span class="p">,</span>
                <span class="n">model_trigger</span><span class="o">=</span><span class="n">model_trigger</span><span class="p">,</span>
                <span class="n">requirement_string</span><span class="o">=</span><span class="n">requirement_string</span><span class="p">,</span>
                <span class="n">effect</span><span class="o">=</span><span class="n">effect</span><span class="p">,</span>
                <span class="n">trigger</span><span class="o">=</span><span class="n">trigger</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_name_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">called_during_restore</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stored_event_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;onset&quot;</span><span class="p">:</span> <span class="n">onset</span><span class="p">,</span>
                    <span class="s2">&quot;model_trigger&quot;</span><span class="p">:</span> <span class="n">model_trigger</span><span class="p">,</span>
                    <span class="s2">&quot;requirement_string&quot;</span><span class="p">:</span> <span class="n">requirement_string</span><span class="p">,</span>
                    <span class="s2">&quot;effect&quot;</span><span class="p">:</span> <span class="n">effect</span><span class="p">,</span>
                    <span class="s2">&quot;trigger&quot;</span><span class="p">:</span> <span class="n">trigger</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_restore_event_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Restore the event list after simulation to the state before the first call of</span>
<span class="sd">        run. To be able to run the simulation multiple times.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_during_restore</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_event_list</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="o">**</span><span class="n">event</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_during_restore</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run the simulation. The simulation runs until the end event is triggered. The</span>
<span class="sd">        simulation can be run multiple times by calling this function multiple times.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### for all events with given onset, change onset to current step + onset</span>
        <span class="c1">### (otherwise run would need to be called at time 0)</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">()</span> <span class="o">+</span> <span class="n">event</span><span class="o">.</span><span class="n">onset</span>

        <span class="c1">### check if there are events which have no onset and are not triggered by other</span>
        <span class="c1">### events and have no model_trigger --&gt; they would never start</span>
        <span class="c1">### --&gt; set their onset to current step --&gt; they are run directly after calling run</span>
        <span class="n">triggered_events</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">trigger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">triggered_events</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">trigger</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">model_trigger</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">triggered_events</span>
            <span class="p">):</span>
                <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;set onset to start of run&quot;</span><span class="p">)</span>

        <span class="c1">### run simulation</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">):</span>
            <span class="c1">### check if model triggers were activated --&gt; if yes run the corresponding events, model_trigger events can trigger other events (with onset) --&gt; run current_step events after model trigger events</span>
            <span class="c1">### if that&#39;s the case --&gt; model trigger event would run twice (because during first run it gets an onset) --&gt; define here run_event_list which prevents events run twice</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">run_event_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_run_model_trigger_events</span><span class="p">()</span>
            <span class="c1">### run the events of the current time, based on mode and happened events</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_run_current_events</span><span class="p">()</span>
            <span class="c1">### if event triggered end --&gt; end simulation / skip rest</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;end event triggered --&gt; end simulation&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="c1">### check then next events occur</span>
            <span class="n">next_events_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_next_events_time</span><span class="p">()</span>
            <span class="c1">### check if there are model triggers</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_trigger_list</span><span class="p">()</span>
            <span class="c1">### simulate until next event(s) or model triggers</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;check_triggers:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1">### multiple model triggers</span>
                <span class="n">ann</span><span class="o">.</span><span class="n">simulate_until</span><span class="p">(</span>
                    <span class="n">max_duration</span><span class="o">=</span><span class="n">next_events_time</span><span class="p">,</span>
                    <span class="n">population</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">ann</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="n">pop_name</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">pop_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span>
                    <span class="p">],</span>
                    <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;or&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1">### a single model trigger</span>
                <span class="n">ann</span><span class="o">.</span><span class="n">simulate_until</span><span class="p">(</span>
                    <span class="n">max_duration</span><span class="o">=</span><span class="n">next_events_time</span><span class="p">,</span>
                    <span class="n">population</span><span class="o">=</span><span class="n">ann</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">### no model_triggers</span>
                <span class="n">ann</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">next_events_time</span><span class="p">)</span>

        <span class="c1">### after run finishes initialize again</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize</span><span class="p">()</span>

        <span class="c1">### restore event_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_restore_event_list</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_run_current_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run all events with start == current step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### run all events of the current step</span>
        <span class="c1">### repeat this until no event was run, because events can set the onset of other events to the current step</span>
        <span class="c1">### due to repeat --&gt; prevent that same event is run twice</span>
        <span class="n">event_run</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">while</span> <span class="n">event_run</span><span class="p">:</span>
            <span class="n">event_run</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">==</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">()</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_event_list</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">_check_requirements</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
                    <span class="n">event_run</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">run_event_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_run_model_trigger_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check the current model triggers stored in self.model_trigger_list</span>
<span class="sd">        if they are activated --&gt; run corresponding events</span>
<span class="sd">        prevent that these model triggers are stored again in self.model_trigger_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">### loop to check if model trigger got active</span>
        <span class="k">for</span> <span class="n">model_trigger</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">:</span>
            <span class="c1">### TODO this is not generalized yet, only works if the model_trigger populations have the variable decision which is set to -1 if the model trigger is active</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="n">model_trigger</span><span class="p">)</span><span class="o">.</span><span class="n">decision</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="c1">### -1 means got active</span>
                <span class="c1">### find the events triggerd by the model_trigger and run them</span>
                <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">model_trigger</span> <span class="o">==</span> <span class="n">model_trigger</span><span class="p">:</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">run_event_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="c1">### prevent that these model_triggers are used again</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">past_model_trigger_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_trigger</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_next_events_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        go through all events and get onsets</span>
<span class="sd">        get onset which are &gt; current_step</span>
<span class="sd">        return smallest diff in ms (ms value = full timesteps!)</span>

<span class="sd">        Returns:</span>
<span class="sd">            time (float):</span>
<span class="sd">                time in ms until the next event, rounded to full timesteps</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">next_event_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
            <span class="c1">### skip events without onset</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1">### check if onset in the future and nearest</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">&gt;</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">()</span>
                <span class="ow">and</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">-</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">())</span> <span class="o">&lt;</span> <span class="n">next_event_time</span>
            <span class="p">):</span>
                <span class="n">next_event_time</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">-</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">()</span>
        <span class="c1">### return difference (simulation duration until nearest next event) in ms, round to full timesteps</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">next_event_time</span> <span class="o">*</span> <span class="n">ann</span><span class="o">.</span><span class="n">dt</span><span class="p">(),</span> <span class="n">af</span><span class="o">.</span><span class="n">get_number_of_decimals</span><span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="n">dt</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">_get_model_trigger_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check if there are events with model_triggers</span>
<span class="sd">        check if these model triggers already happened</span>
<span class="sd">        check if the requirements of the events are met</span>
<span class="sd">        not happend + requirements met --&gt; add model_trigger to model_trigger_list</span>
<span class="sd">        returns the (new) model_trigger_list</span>

<span class="sd">        Returns:</span>
<span class="sd">            model_trigger_list (list):</span>
<span class="sd">                list of model triggers which are not in past_model_trigger_list and</span>
<span class="sd">                have their requirements met</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">model_trigger</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="ow">not</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">model_trigger</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">past_model_trigger_list</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">_check_requirements</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">model_trigger</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">_end_sim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Event to end the simulation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">class</span> <span class="nc">_Event</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Class for events in the simulation</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">trial_procedure</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">onset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">model_trigger</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">requirement_string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">effect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">trigger</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Args:</span>
<span class="sd">                trial_procedure (SimulationEvents):</span>
<span class="sd">                    SimulationEvents object</span>
<span class="sd">                name (str):</span>
<span class="sd">                    name of the event</span>
<span class="sd">                onset (int):</span>
<span class="sd">                    time in simulation steps when the event should occur</span>
<span class="sd">                model_trigger (str):</span>
<span class="sd">                    name of population which can trigger the event (by setting variable</span>
<span class="sd">                    decision to -1)</span>
<span class="sd">                requirement_string (str):</span>
<span class="sd">                    string containing the requirements for the event to occur TODO: replace with function</span>
<span class="sd">                effect (function):</span>
<span class="sd">                    function which is executed during the event</span>
<span class="sd">                trigger (dict):</span>
<span class="sd">                    dictionary containing the names of other events as keys and the</span>
<span class="sd">                    relative time in simulation steps to the onset of the current event as</span>
<span class="sd">                    values. The values can also be callable functions which return the</span>
<span class="sd">                    time (without any aruments). They are called when this event is triggered.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trial_procedure</span> <span class="o">=</span> <span class="n">trial_procedure</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="n">onset</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger</span> <span class="o">=</span> <span class="n">model_trigger</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">requirement_string</span> <span class="o">=</span> <span class="n">requirement_string</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">effect</span> <span class="o">=</span> <span class="n">effect</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span> <span class="o">=</span> <span class="n">trigger</span>

        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Run the event i.e. execute the effect of the event and trigger other events</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1">### check requirements</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_requirements</span><span class="p">():</span>
                <span class="c1">### run the event</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trial_procedure</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;run event:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_time</span><span class="p">())</span>
                <span class="c1">### for events which are triggered by model --&gt; set onset</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">onset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">()</span>
                <span class="c1">### run the effect</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">effect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">effect</span><span class="p">()</span>
                <span class="c1">### trigger other events</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1">### loop over all triggered events</span>
                    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">delay</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="c1">### get the other event</span>
                        <span class="n">event_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trial_procedure</span><span class="o">.</span><span class="n">event_name_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                        <span class="c1">### set onset of other event</span>
                        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">delay</span><span class="p">):</span>
                            <span class="n">add</span> <span class="o">=</span> <span class="n">delay</span><span class="p">()</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">trial_procedure</span><span class="o">.</span><span class="n">event_list</span><span class="p">[</span><span class="n">event_idx</span><span class="p">]</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">onset</span> <span class="o">+</span> <span class="n">add</span>
                            <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">trial_procedure</span><span class="o">.</span><span class="n">event_list</span><span class="p">[</span><span class="n">event_idx</span><span class="p">]</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">onset</span> <span class="o">+</span> <span class="n">delay</span>
                            <span class="p">)</span>
                <span class="c1">### store event in happened events</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">trial_procedure</span><span class="o">.</span><span class="n">happened_event_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1">### TODO replace requirement_string with a function (which has access to the</span>
        <span class="c1">### attributes) checking the requirements</span>
        <span class="k">def</span> <span class="nf">_check_requirements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Check if the requirements for the event are met</span>

<span class="sd">            Returns:</span>
<span class="sd">                met (bool):</span>
<span class="sd">                    True if requirements are met, False otherwise</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirement_string</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1">### check requirement with requirement string</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eval_requirement_string</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">### no requirement</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">_eval_requirement_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            evaluates a condition string in format like &#39;XXX==XXX and (XXX==XXX or</span>
<span class="sd">            XXX==XXX)&#39;</span>

<span class="sd">            Returns:</span>
<span class="sd">                met (bool):</span>
<span class="sd">                    True if requirements are met, False otherwise</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1">### split condition string</span>
            <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirement_string</span>
            <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; and &quot;</span><span class="p">)</span>
            <span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="n">sub_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; or &quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">sub_string</span> <span class="ow">in</span> <span class="n">string</span><span class="p">]</span>

            <span class="c1">### loop over string splitted string parts</span>
            <span class="n">final_string</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">sub_idx</span><span class="p">,</span> <span class="n">sub_string</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
                <span class="c1">### combine outer list eelemts with and</span>
                <span class="c1">### and combine inner list elements with or</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub_string</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">sub_idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">final_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_get_condition_part</span><span class="p">(</span><span class="n">sub_string</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; and &quot;</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">final_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_condition_part</span><span class="p">(</span><span class="n">sub_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">sub_sub_idx</span><span class="p">,</span> <span class="n">sub_sub_string</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sub_string</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">sub_sub_idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub_string</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="n">final_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_get_condition_part</span><span class="p">(</span><span class="n">sub_sub_string</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; or &quot;</span>
                            <span class="p">)</span>
                        <span class="k">elif</span> <span class="n">sub_idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="n">final_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_get_condition_part</span><span class="p">(</span><span class="n">sub_sub_string</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; and &quot;</span>
                            <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">final_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_get_condition_part</span><span class="p">(</span><span class="n">sub_sub_string</span><span class="p">)</span>
                            <span class="p">)</span>
            <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">final_string</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">_get_condition_part</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            converts a string in format like &#39;((XXX==XXX)&#39; into &#39;((True)&#39;</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1">### remove spaces from string</span>
            <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

            <span class="c1">### recursively remove brackets</span>
            <span class="c1">### at the end evaluate term (without brackets) and then return the evaluated value with the former brackets</span>
            <span class="k">if</span> <span class="n">string</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_condition_part</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
            <span class="k">elif</span> <span class="n">string</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_condition_part</span><span class="p">(</span><span class="n">string</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_eval_condition_part</span><span class="p">(</span><span class="n">string</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">_eval_condition_part</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            gets string in format &#39;XXX==XXX&#39;</span>

<span class="sd">            evaluates the term for mode and happened events</span>

<span class="sd">            returns True/False</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="n">var</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;==&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;==&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">var</span> <span class="o">==</span> <span class="s2">&quot;mode&quot;</span><span class="p">:</span>
                <span class="n">test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trial_procedure</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="n">val</span>
            <span class="k">elif</span> <span class="n">var</span> <span class="o">==</span> <span class="s2">&quot;happened_event_list&quot;</span><span class="p">:</span>
                <span class="c1">### remove brackets</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)</span>
                <span class="c1">### split entries</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
                <span class="c1">### remove spaces from entries</span>
                <span class="n">happened_event_list_from_string</span> <span class="o">=</span> <span class="p">[</span><span class="n">val_val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">val_val</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
                <span class="c1">### check if all events are in happened_event_list, if not --&gt; return False</span>
                <span class="n">test</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">happened_event_list_from_string</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">trial_procedure</span><span class="o">.</span><span class="n">happened_event_list</span><span class="p">):</span>
                        <span class="n">test</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="n">test</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="CompNeuroPy.simulation_functions.SimulationEvents.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.SimulationEvents.__init__" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>verbose</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, additional information is printed during simulation</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        verbose (bool):</span>
<span class="sd">            if True, additional information is printed during simulation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">### set verbose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
    <span class="c1">### initialize events</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initialize</span><span class="p">()</span>
    <span class="c1">### list for storing added events, without changing them</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stored_event_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">called_during_restore</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1">### add the end event</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">effect</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_end_sim</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="CompNeuroPy.simulation_functions.SimulationEvents.add_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_event</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">onset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model_trigger</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">requirement_string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">effect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">trigger</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.SimulationEvents.add_event" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Adds an event to the simulation. You always have to trigger the end event to end
the simulation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the event</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>onset</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>time in simulation steps when the event should occur</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>model_trigger</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of population which can trigger the event (by setting variable
decision to -1)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>requirement_string</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>string containing the requirements for the event to occur TODO: replace with function</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>effect</code></td>
            <td>
                  <code>function</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function which is executed during the event. Within the effect function
you can use the attributes of the class which inherits from
SimulationEvents.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>trigger</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the names of other events as keys and the
relative time in simulation steps to the onset of the current event as
values. The values can also be callable functions which return the
time (without any aruments). They are called when this event is triggered.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_event</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">onset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">model_trigger</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">requirement_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">effect</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">trigger</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds an event to the simulation. You always have to trigger the end event to end</span>
<span class="sd">    the simulation.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str):</span>
<span class="sd">            name of the event</span>
<span class="sd">        onset (int):</span>
<span class="sd">            time in simulation steps when the event should occur</span>
<span class="sd">        model_trigger (str):</span>
<span class="sd">            name of population which can trigger the event (by setting variable</span>
<span class="sd">            decision to -1)</span>
<span class="sd">        requirement_string (str):</span>
<span class="sd">            string containing the requirements for the event to occur TODO: replace with function</span>
<span class="sd">        effect (function):</span>
<span class="sd">            Function which is executed during the event. Within the effect function</span>
<span class="sd">            you can use the attributes of the class which inherits from</span>
<span class="sd">            SimulationEvents.</span>
<span class="sd">        trigger (dict):</span>
<span class="sd">            dictionary containing the names of other events as keys and the</span>
<span class="sd">            relative time in simulation steps to the onset of the current event as</span>
<span class="sd">            values. The values can also be callable functions which return the</span>
<span class="sd">            time (without any aruments). They are called when this event is triggered.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_Event</span><span class="p">(</span>
            <span class="n">trial_procedure</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">onset</span><span class="o">=</span><span class="n">onset</span><span class="p">,</span>
            <span class="n">model_trigger</span><span class="o">=</span><span class="n">model_trigger</span><span class="p">,</span>
            <span class="n">requirement_string</span><span class="o">=</span><span class="n">requirement_string</span><span class="p">,</span>
            <span class="n">effect</span><span class="o">=</span><span class="n">effect</span><span class="p">,</span>
            <span class="n">trigger</span><span class="o">=</span><span class="n">trigger</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">event_name_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">called_during_restore</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stored_event_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;onset&quot;</span><span class="p">:</span> <span class="n">onset</span><span class="p">,</span>
                <span class="s2">&quot;model_trigger&quot;</span><span class="p">:</span> <span class="n">model_trigger</span><span class="p">,</span>
                <span class="s2">&quot;requirement_string&quot;</span><span class="p">:</span> <span class="n">requirement_string</span><span class="p">,</span>
                <span class="s2">&quot;effect&quot;</span><span class="p">:</span> <span class="n">effect</span><span class="p">,</span>
                <span class="s2">&quot;trigger&quot;</span><span class="p">:</span> <span class="n">trigger</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="CompNeuroPy.simulation_functions.SimulationEvents.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span></code>

<a href="#CompNeuroPy.simulation_functions.SimulationEvents.run" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents ">

        <p>Run the simulation. The simulation runs until the end event is triggered. The
simulation can be run multiple times by calling this function multiple times.</p>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the simulation. The simulation runs until the end event is triggered. The</span>
<span class="sd">    simulation can be run multiple times by calling this function multiple times.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">### for all events with given onset, change onset to current step + onset</span>
    <span class="c1">### (otherwise run would need to be called at time 0)</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">()</span> <span class="o">+</span> <span class="n">event</span><span class="o">.</span><span class="n">onset</span>

    <span class="c1">### check if there are events which have no onset and are not triggered by other</span>
    <span class="c1">### events and have no model_trigger --&gt; they would never start</span>
    <span class="c1">### --&gt; set their onset to current step --&gt; they are run directly after calling run</span>
    <span class="n">triggered_events</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">trigger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">triggered_events</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">trigger</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">model_trigger</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">triggered_events</span>
        <span class="p">):</span>
            <span class="n">event</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;set onset to start of run&quot;</span><span class="p">)</span>

    <span class="c1">### run simulation</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">):</span>
        <span class="c1">### check if model triggers were activated --&gt; if yes run the corresponding events, model_trigger events can trigger other events (with onset) --&gt; run current_step events after model trigger events</span>
        <span class="c1">### if that&#39;s the case --&gt; model trigger event would run twice (because during first run it gets an onset) --&gt; define here run_event_list which prevents events run twice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_event_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_run_model_trigger_events</span><span class="p">()</span>
        <span class="c1">### run the events of the current time, based on mode and happened events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_run_current_events</span><span class="p">()</span>
        <span class="c1">### if event triggered end --&gt; end simulation / skip rest</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;end event triggered --&gt; end simulation&quot;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="c1">### check then next events occur</span>
        <span class="n">next_events_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_next_events_time</span><span class="p">()</span>
        <span class="c1">### check if there are model triggers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_trigger_list</span><span class="p">()</span>
        <span class="c1">### simulate until next event(s) or model triggers</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;check_triggers:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">### multiple model triggers</span>
            <span class="n">ann</span><span class="o">.</span><span class="n">simulate_until</span><span class="p">(</span>
                <span class="n">max_duration</span><span class="o">=</span><span class="n">next_events_time</span><span class="p">,</span>
                <span class="n">population</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">ann</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="n">pop_name</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">pop_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span>
                <span class="p">],</span>
                <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;or&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1">### a single model trigger</span>
            <span class="n">ann</span><span class="o">.</span><span class="n">simulate_until</span><span class="p">(</span>
                <span class="n">max_duration</span><span class="o">=</span><span class="n">next_events_time</span><span class="p">,</span>
                <span class="n">population</span><span class="o">=</span><span class="n">ann</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_trigger_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">### no model_triggers</span>
            <span class="n">ann</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">next_events_time</span><span class="p">)</span>

    <span class="c1">### after run finishes initialize again</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initialize</span><span class="p">()</span>

    <span class="c1">### restore event_list</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_restore_event_list</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="CompNeuroPy.simulation_functions.attr_sim" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">attr_sim</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">attr_dict</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.attr_sim" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">

        <p>Simulates a period 't' setting the attributes of a given population to the values
specified in 'attr_list', after this simulation the attributes are reset to initial
values (before simulation).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pop</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population name of population whose attributes should be set</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>attr_dict</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the attributes and their values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>t</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duration in ms</p>
              </div>
            </td>
            <td>
                  <code>500</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>attr_list_dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the attribute values for each time step, keys are the
attribute names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">attr_sim</span><span class="p">(</span><span class="n">pop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr_dict</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">500</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates a period &#39;t&#39; setting the attributes of a given population to the values</span>
<span class="sd">    specified in &#39;attr_list&#39;, after this simulation the attributes are reset to initial</span>
<span class="sd">    values (before simulation).</span>

<span class="sd">    Args:</span>
<span class="sd">        pop (str):</span>
<span class="sd">            population name of population whose attributes should be set</span>
<span class="sd">        attr_dict (dict):</span>
<span class="sd">            dictionary containing the attributes and their values</span>
<span class="sd">        t (int):</span>
<span class="sd">            duration in ms</span>

<span class="sd">    Returns:</span>
<span class="sd">        attr_list_dict (dict):</span>
<span class="sd">            dictionary containing the attribute values for each time step, keys are the</span>
<span class="sd">            attribute names</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### save prev attr</span>
    <span class="n">v_prev_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">attr</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">),</span> <span class="n">attr</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attr_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="c1">### set attributes</span>
    <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attr_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">),</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

    <span class="c1">### simulate</span>
    <span class="n">ann</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

    <span class="c1">### reset attributes to previous values</span>
    <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">v_prev_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">),</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

    <span class="c1">### return the values for the attribute for each time step</span>
    <span class="n">attr_list_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">attr</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="n">ann</span><span class="o">.</span><span class="n">dt</span><span class="p">()))</span> <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attr_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">attr_list_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CompNeuroPy.simulation_functions.attribute_step" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">attribute_step</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">v1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v2</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.attribute_step" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">

        <p>Simulates an attribute step for a given population.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pop</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population name of population whose attribute should be changed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>attr</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of attribute which should be changed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>t1</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>time in ms before step</p>
              </div>
            </td>
            <td>
                  <code>500</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>t2</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>time in ms after step</p>
              </div>
            </td>
            <td>
                  <code>500</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>v1</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>value of attribute for t1</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>v2</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>value of attribute for t2</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>return_dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing:</p>
<ul>
<li>duration (int): duration of the simulation</li>
<li>v_arr (np.array): array of attribute values for each time step</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">attribute_step</span><span class="p">(</span><span class="n">pop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">v1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v2</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates an attribute step for a given population.</span>

<span class="sd">    Args:</span>
<span class="sd">        pop (str):</span>
<span class="sd">            population name of population whose attribute should be changed</span>
<span class="sd">        attr (str):</span>
<span class="sd">            name of attribute which should be changed</span>
<span class="sd">        t1 (int):</span>
<span class="sd">            time in ms before step</span>
<span class="sd">        t2 (int):</span>
<span class="sd">            time in ms after step</span>
<span class="sd">        v1 (int):</span>
<span class="sd">            value of attribute for t1</span>
<span class="sd">        v2 (int):</span>
<span class="sd">            value of attribute for t2</span>

<span class="sd">    Returns:</span>
<span class="sd">        return_dict (dict):</span>
<span class="sd">            dictionary containing:</span>

<span class="sd">            - duration (int): duration of the simulation</span>
<span class="sd">            - v_arr (np.array): array of attribute values for each time step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">v_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1">### first/pre step simulation</span>
    <span class="n">attr_list_dict</span> <span class="o">=</span> <span class="n">attr_sim</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">v1</span><span class="p">},</span> <span class="n">t</span><span class="o">=</span><span class="n">t1</span><span class="p">)</span>
    <span class="n">v_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">attr_list_dict</span><span class="p">[</span><span class="n">attr</span><span class="p">])</span>
    <span class="c1">### second/post step simulation</span>
    <span class="n">attr_list_dict</span> <span class="o">=</span> <span class="n">attr_sim</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">v2</span><span class="p">},</span> <span class="n">t</span><span class="o">=</span><span class="n">t2</span><span class="p">)</span>
    <span class="n">v_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">attr_list_dict</span><span class="p">[</span><span class="n">attr</span><span class="p">])</span>

    <span class="c1">### return duration of the simulation and the attribute values</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">t1</span> <span class="o">+</span> <span class="n">t2</span><span class="p">,</span> <span class="s2">&quot;v_arr&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v_list</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CompNeuroPy.simulation_functions.attr_ramp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">attr_ramp</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v0</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">dur</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.attr_ramp" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">

        <p>Simulating while constantly changing the attribute of a given population.
After this attr_ramp simulation the attribute value is reset to the initial
value (before simulation).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pop</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population name of population whose attribute should be changed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>attr</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of attribute which should be changed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>v0</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>initial value of attribute (of first stimulation)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>v1</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>final value of attribute (of last stimulation)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dur</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duration of the complete ramp simulation</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>n</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of steps for changing the attribute</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>dur/n should be divisible by the simulation time step without remainder</p>
</div>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>return_dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing:</p>
<ul>
<li>dv (int): step size of attribute</li>
<li>dur_stim (int): duration of single steps</li>
<li>v_arr (np.array): array of attribute values for each time step</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if resulting duration of one stimulation is not divisible by the
simulation time step without remainder</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">attr_ramp</span><span class="p">(</span><span class="n">pop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v0</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">dur</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulating while constantly changing the attribute of a given population.</span>
<span class="sd">    After this attr_ramp simulation the attribute value is reset to the initial</span>
<span class="sd">    value (before simulation).</span>

<span class="sd">    Args:</span>
<span class="sd">        pop (str):</span>
<span class="sd">            population name of population whose attribute should be changed</span>
<span class="sd">        attr (str):</span>
<span class="sd">            name of attribute which should be changed</span>
<span class="sd">        v0 (int):</span>
<span class="sd">            initial value of attribute (of first stimulation)</span>
<span class="sd">        v1 (int):</span>
<span class="sd">            final value of attribute (of last stimulation)</span>
<span class="sd">        dur (int):</span>
<span class="sd">            duration of the complete ramp simulation</span>
<span class="sd">        n (int):</span>
<span class="sd">            number of steps for changing the attribute</span>

<span class="sd">    !!! warning</span>
<span class="sd">        dur/n should be divisible by the simulation time step without remainder</span>

<span class="sd">    Returns:</span>
<span class="sd">        return_dict (dict):</span>
<span class="sd">            dictionary containing:</span>

<span class="sd">            - dv (int): step size of attribute</span>
<span class="sd">            - dur_stim (int): duration of single steps</span>
<span class="sd">            - v_arr (np.array): array of attribute values for each time step</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if resulting duration of one stimulation is not divisible by the</span>
<span class="sd">            simulation time step without remainder</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">dur</span> <span class="o">/</span> <span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">ann</span><span class="o">.</span><span class="n">dt</span><span class="p">()</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;ERROR current_ramp: dur/n should result in a duration (for a single stimulation) which is divisible by the simulation time step (without remainder)</span><span class="se">\n</span><span class="s2">current duration = &quot;</span>
            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dur</span> <span class="o">/</span> <span class="n">n</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">&quot;, timestep = &quot;</span>
            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="n">dt</span><span class="p">())</span>
            <span class="o">+</span> <span class="s2">&quot;!</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">dv</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span> <span class="o">-</span> <span class="n">v0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># for n stimulations only n-1 steps occur</span>
    <span class="n">dur_stim</span> <span class="o">=</span> <span class="n">dur</span> <span class="o">/</span> <span class="n">n</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">v0</span>
    <span class="n">v_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">attr_list_dict</span> <span class="o">=</span> <span class="n">attr_sim</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">attr_dict</span><span class="o">=</span><span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">v</span><span class="p">},</span> <span class="n">t</span><span class="o">=</span><span class="n">dur_stim</span><span class="p">)</span>
        <span class="n">v_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">attr_list_dict</span><span class="p">[</span><span class="n">attr</span><span class="p">])</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="n">dv</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;dv&quot;</span><span class="p">:</span> <span class="n">dv</span><span class="p">,</span> <span class="s2">&quot;dur_stim&quot;</span><span class="p">:</span> <span class="n">dur_stim</span><span class="p">,</span> <span class="s2">&quot;v_arr&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v_list</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CompNeuroPy.simulation_functions.increasing_attr" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">increasing_attr</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v0</span><span class="p">,</span> <span class="n">dv</span><span class="p">,</span> <span class="n">nr_steps</span><span class="p">,</span> <span class="n">dur_step</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.increasing_attr" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">

        <p>Conducts multiple simulations while constantly increasing the attribute of a given
population. After this simulation the attribute value is reset to the initial value
(before simulation).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pop</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population name of population whose attribute should be changed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>v0</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>initial attribute value (of first stimulation)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dv</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>attribute step size</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>nr_steps</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of simulations with different attribute values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dur_step</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duration of one step simulation</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>return_dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing:</p>
<ul>
<li>attr_list (list): list of attribute values for each step simulation</li>
<li>v_arr (np.array): array of attribute values for each time step</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">increasing_attr</span><span class="p">(</span><span class="n">pop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">v0</span><span class="p">,</span> <span class="n">dv</span><span class="p">,</span> <span class="n">nr_steps</span><span class="p">,</span> <span class="n">dur_step</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts multiple simulations while constantly increasing the attribute of a given</span>
<span class="sd">    population. After this simulation the attribute value is reset to the initial value</span>
<span class="sd">    (before simulation).</span>

<span class="sd">    Args:</span>
<span class="sd">        pop (str):</span>
<span class="sd">            population name of population whose attribute should be changed</span>
<span class="sd">        v0 (int):</span>
<span class="sd">            initial attribute value (of first stimulation)</span>
<span class="sd">        dv (int):</span>
<span class="sd">            attribute step size</span>
<span class="sd">        nr_steps (int):</span>
<span class="sd">            number of simulations with different attribute values</span>
<span class="sd">        dur_step (int):</span>
<span class="sd">            duration of one step simulation</span>

<span class="sd">    Returns:</span>
<span class="sd">        return_dict (dict):</span>
<span class="sd">            dictionary containing:</span>

<span class="sd">            - attr_list (list): list of attribute values for each step simulation</span>
<span class="sd">            - v_arr (np.array): array of attribute values for each time step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attr_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">v0</span>
    <span class="n">v_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nr_steps</span><span class="p">):</span>
        <span class="n">attr_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="n">attr_list_dict</span> <span class="o">=</span> <span class="n">attr_sim</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">v</span><span class="p">},</span> <span class="n">t</span><span class="o">=</span><span class="n">dur_step</span><span class="p">)</span>
        <span class="n">v_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">attr_list_dict</span><span class="p">[</span><span class="n">attr</span><span class="p">])</span>
        <span class="n">v</span> <span class="o">+=</span> <span class="n">dv</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;attr_list&quot;</span><span class="p">:</span> <span class="n">attr_list</span><span class="p">,</span> <span class="s2">&quot;v_arr&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v_list</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CompNeuroPy.simulation_functions.current_step" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_step</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">a1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">a2</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.current_step" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">

        <p>Stimulates a given population in two periods with two input currents.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pop</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population name of population, which should be stimulated with input current
neuron model of population has to contain "I_app" as input current</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>t1</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>time in ms before current step</p>
              </div>
            </td>
            <td>
                  <code>500</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>t2</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>time in ms after current step</p>
              </div>
            </td>
            <td>
                  <code>500</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>a1</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current amplitude before current step</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>a2</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current amplitude after current step</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>return_dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing:</p>
<ul>
<li>duration (int): duration of the simulation</li>
<li>current_arr (np.array): array of current values for each time step</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">current_step</span><span class="p">(</span><span class="n">pop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">a1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">a2</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stimulates a given population in two periods with two input currents.</span>

<span class="sd">    Args:</span>
<span class="sd">        pop (str):</span>
<span class="sd">            population name of population, which should be stimulated with input current</span>
<span class="sd">            neuron model of population has to contain &quot;I_app&quot; as input current</span>
<span class="sd">        t1 (int):</span>
<span class="sd">            time in ms before current step</span>
<span class="sd">        t2 (int):</span>
<span class="sd">            time in ms after current step</span>
<span class="sd">        a1 (int):</span>
<span class="sd">            current amplitude before current step</span>
<span class="sd">        a2 (int):</span>
<span class="sd">            current amplitude after current step</span>

<span class="sd">    Returns:</span>
<span class="sd">        return_dict (dict):</span>
<span class="sd">            dictionary containing:</span>

<span class="sd">            - duration (int): duration of the simulation</span>
<span class="sd">            - current_arr (np.array): array of current values for each time step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attribute_step_ret</span> <span class="o">=</span> <span class="n">attribute_step</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="s2">&quot;I_app&quot;</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="n">t2</span><span class="p">,</span> <span class="n">v1</span><span class="o">=</span><span class="n">a1</span><span class="p">,</span> <span class="n">v2</span><span class="o">=</span><span class="n">a2</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">attribute_step_ret</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">],</span>
        <span class="s2">&quot;current_arr&quot;</span><span class="p">:</span> <span class="n">attribute_step_ret</span><span class="p">[</span><span class="s2">&quot;v_arr&quot;</span><span class="p">],</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CompNeuroPy.simulation_functions.current_stim" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_stim</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.current_stim" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">

        <p>Stimulates a given population during specified period 't' with input current with
amplitude 'a', after this stimulation the current is reset to initial value
(before stimulation).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pop</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population name of population, which should be stimulated with input current
neuron model of population has to contain "I_app" as input current</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>t</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duration in ms</p>
              </div>
            </td>
            <td>
                  <code>500</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>a</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current amplitude</p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>current_arr</code></td>            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of current values for each time step</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">current_stim</span><span class="p">(</span><span class="n">pop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stimulates a given population during specified period &#39;t&#39; with input current with</span>
<span class="sd">    amplitude &#39;a&#39;, after this stimulation the current is reset to initial value</span>
<span class="sd">    (before stimulation).</span>

<span class="sd">    Args:</span>
<span class="sd">        pop (str):</span>
<span class="sd">            population name of population, which should be stimulated with input current</span>
<span class="sd">            neuron model of population has to contain &quot;I_app&quot; as input current</span>
<span class="sd">        t (int):</span>
<span class="sd">            duration in ms</span>
<span class="sd">        a (int):</span>
<span class="sd">            current amplitude</span>

<span class="sd">    Returns:</span>
<span class="sd">        current_arr (np.array):</span>
<span class="sd">            array of current values for each time step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attr_list_dict</span> <span class="o">=</span> <span class="n">attr_sim</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;I_app&quot;</span><span class="p">:</span> <span class="n">a</span><span class="p">},</span> <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">attr_list_dict</span><span class="p">[</span><span class="s2">&quot;I_app&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CompNeuroPy.simulation_functions.current_ramp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_ramp</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">dur</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.current_ramp" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">

        <p>Conducts multiple current stimulations with constantly changing current inputs.
After this current_ramp stimulation the current amplitude is reset to the initial
value (before current ramp).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pop</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population name of population, which should be stimulated with input current
neuron model of population has to contain "I_app" as input current</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>a0</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>initial current amplitude (of first stimulation)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>a1</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>final current amplitude (of last stimulation)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dur</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duration of the complete current ramp (all stimulations)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>n</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of stimulations</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>dur/n should be divisible by the simulation time step without remainder</p>
</div>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>return_dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing:</p>
<ul>
<li>da (int): current step size</li>
<li>dur_stim (int): duration of one stimulation</li>
<li>current_arr (np.array): array of current values for each time step</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if resulting duration of one stimulation is not divisible by the
simulation time step without remainder</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">current_ramp</span><span class="p">(</span><span class="n">pop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">dur</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts multiple current stimulations with constantly changing current inputs.</span>
<span class="sd">    After this current_ramp stimulation the current amplitude is reset to the initial</span>
<span class="sd">    value (before current ramp).</span>


<span class="sd">    Args:</span>
<span class="sd">        pop (str):</span>
<span class="sd">            population name of population, which should be stimulated with input current</span>
<span class="sd">            neuron model of population has to contain &quot;I_app&quot; as input current</span>
<span class="sd">        a0 (int):</span>
<span class="sd">            initial current amplitude (of first stimulation)</span>
<span class="sd">        a1 (int):</span>
<span class="sd">            final current amplitude (of last stimulation)</span>
<span class="sd">        dur (int):</span>
<span class="sd">            duration of the complete current ramp (all stimulations)</span>
<span class="sd">        n (int):</span>
<span class="sd">            number of stimulations</span>

<span class="sd">    !!! warning</span>
<span class="sd">        dur/n should be divisible by the simulation time step without remainder</span>

<span class="sd">    Returns:</span>
<span class="sd">        return_dict (dict):</span>
<span class="sd">            dictionary containing:</span>

<span class="sd">            - da (int): current step size</span>
<span class="sd">            - dur_stim (int): duration of one stimulation</span>
<span class="sd">            - current_arr (np.array): array of current values for each time step</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if resulting duration of one stimulation is not divisible by the</span>
<span class="sd">            simulation time step without remainder</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attr_ramp_return</span> <span class="o">=</span> <span class="n">attr_ramp</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="s2">&quot;I_app&quot;</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">dur</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;da&quot;</span><span class="p">:</span> <span class="n">attr_ramp_return</span><span class="p">[</span><span class="s2">&quot;dv&quot;</span><span class="p">],</span>
        <span class="s2">&quot;dur_stim&quot;</span><span class="p">:</span> <span class="n">attr_ramp_return</span><span class="p">[</span><span class="s2">&quot;dur_stim&quot;</span><span class="p">],</span>
        <span class="s2">&quot;current_arr&quot;</span><span class="p">:</span> <span class="n">attr_ramp_return</span><span class="p">[</span><span class="s2">&quot;v_arr&quot;</span><span class="p">],</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CompNeuroPy.simulation_functions.increasing_current" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">increasing_current</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span> <span class="n">nr_steps</span><span class="p">,</span> <span class="n">dur_step</span><span class="p">)</span></code>

<a href="#CompNeuroPy.simulation_functions.increasing_current" class="headerlink" title="Permanent link">#</a></h2>


    <div class="doc doc-contents ">

        <p>Conducts multiple current stimulations with constantly increasing current inputs.
After this increasing_current stimulation the current amplitude is reset to the
initial value (before increasing_current).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pop</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population name of population, which should be stimulated with input current
neuron model of population has to contain "I_app" as input current</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>a0</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>initial current amplitude (of first stimulation)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>da</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current step size</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>nr_steps</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of stimulations</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dur_step</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duration of one stimulation</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>return_dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing:</p>
<ul>
<li>current_list (list): list of current amplitudes for each stimulation</li>
<li>current_arr (np.array): array of current values for each time step</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>CompNeuroPy/simulation_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">increasing_current</span><span class="p">(</span><span class="n">pop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span> <span class="n">nr_steps</span><span class="p">,</span> <span class="n">dur_step</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conducts multiple current stimulations with constantly increasing current inputs.</span>
<span class="sd">    After this increasing_current stimulation the current amplitude is reset to the</span>
<span class="sd">    initial value (before increasing_current).</span>

<span class="sd">    Args:</span>
<span class="sd">        pop (str):</span>
<span class="sd">            population name of population, which should be stimulated with input current</span>
<span class="sd">            neuron model of population has to contain &quot;I_app&quot; as input current</span>
<span class="sd">        a0 (int):</span>
<span class="sd">            initial current amplitude (of first stimulation)</span>
<span class="sd">        da (int):</span>
<span class="sd">            current step size</span>
<span class="sd">        nr_steps (int):</span>
<span class="sd">            number of stimulations</span>
<span class="sd">        dur_step (int):</span>
<span class="sd">            duration of one stimulation</span>

<span class="sd">    Returns:</span>
<span class="sd">        return_dict (dict):</span>
<span class="sd">            dictionary containing:</span>

<span class="sd">            - current_list (list): list of current amplitudes for each stimulation</span>
<span class="sd">            - current_arr (np.array): array of current values for each time step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">increasing_attr_return</span> <span class="o">=</span> <span class="n">increasing_attr</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="s2">&quot;I_app&quot;</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span> <span class="n">nr_steps</span><span class="p">,</span> <span class="n">dur_step</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;current_list&quot;</span><span class="p">:</span> <span class="n">increasing_attr_return</span><span class="p">[</span><span class="s2">&quot;attr_list&quot;</span><span class="p">],</span>
        <span class="s2">&quot;current_arr&quot;</span><span class="p">:</span> <span class="n">increasing_attr_return</span><span class="p">[</span><span class="s2">&quot;v_arr&quot;</span><span class="p">],</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Oliver Maith
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "content.code.copy"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>