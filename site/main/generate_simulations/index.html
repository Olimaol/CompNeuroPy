
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../generate_models/">
      
      
        <link rel="next" href="../monitors_recordings/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.0">
    
    
      
        <title>Generate Simulations - CompNeuroPy</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.45e1311d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CompNeuroPy" class="md-header__button md-logo" aria-label="CompNeuroPy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CompNeuroPy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Generate Simulations
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Olimaol/CompNeuroPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CompNeuroPy" class="md-nav__button md-logo" aria-label="CompNeuroPy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CompNeuroPy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Olimaol/CompNeuroPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Main Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Main Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../generate_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Generate Simulations
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Generate Simulations
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation-information" class="md-nav__link">
    <span class="md-ellipsis">
      Simulation information
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Simulation functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simulation functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim" class="md-nav__link">
    <span class="md-ellipsis">
      CompNeuroSim
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompNeuroSim">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim.run" class="md-nav__link">
    <span class="md-ellipsis">
      run()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim.get_current_arr" class="md-nav__link">
    <span class="md-ellipsis">
      get_current_arr()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim.simulation_info" class="md-nav__link">
    <span class="md-ellipsis">
      simulation_info()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.SimInfo" class="md-nav__link">
    <span class="md-ellipsis">
      SimInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SimInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.SimInfo.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.SimInfo.get_current_arr" class="md-nav__link">
    <span class="md-ellipsis">
      get_current_arr()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitors_recordings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitors / Recordings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimize_neuron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimize a neuron model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../define_experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Define Experiments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dbs_stimulator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DBS Stimulator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_configurator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Configurator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Built-in Models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Built-in Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Full Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/neuron_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neuron Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../built_in/synapse_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synapse Models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Additional Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Additional Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/simulation_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simulation Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/simulation_requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simulation Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/analysis_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Analysis Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/model_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/system_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../additional/extra_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extra Functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/generate_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/run_and_monitor_simulations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Simulations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/monitor_recordings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitor Recordings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/plot_recordings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plot Recordings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/experiment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Define Experiments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/dbs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DBS Simulator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/opt_neuron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimize a neuron model
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation-information" class="md-nav__link">
    <span class="md-ellipsis">
      Simulation information
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Simulation functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simulation functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim" class="md-nav__link">
    <span class="md-ellipsis">
      CompNeuroSim
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompNeuroSim">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim.run" class="md-nav__link">
    <span class="md-ellipsis">
      run()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim.get_current_arr" class="md-nav__link">
    <span class="md-ellipsis">
      get_current_arr()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.CompNeuroSim.simulation_info" class="md-nav__link">
    <span class="md-ellipsis">
      simulation_info()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.SimInfo" class="md-nav__link">
    <span class="md-ellipsis">
      SimInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SimInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.SimInfo.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#CompNeuroPy.generate_simulation.SimInfo.get_current_arr" class="md-nav__link">
    <span class="md-ellipsis">
      get_current_arr()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Generate Simulations</h1>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">#</a></h2>
<p>A CompNeuroPy-simulation can be created using the <a href="#CompNeuroPy.generate_simulation.CompNeuroSim"><code>CompNeuroSim</code></a> class. Similar to the <a href="../generate_models/#CompNeuroPy.generate_model.CompNeuroModel"><code>CompNeuroModel</code></a> class, a function must be defined that contains the actual simulation (the <em>simulation_function</em>) and the <a href="#CompNeuroPy.generate_simulation.CompNeuroSim"><code>CompNeuroSim</code></a> object adds a clear framework. A <a href="#CompNeuroPy.generate_simulation.CompNeuroSim"><code>CompNeuroSim</code></a> is first initialized and can then be run multiple times.</p>
<h2 id="example">Example:<a class="headerlink" href="#example" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">CompNeuroPy</span> <span class="kn">import</span> <span class="n">CompNeuroSim</span>
<span class="n">my_simulation</span> <span class="o">=</span> <span class="n">CompNeuroSim</span><span class="p">(</span><span class="n">simulation_function</span><span class="o">=</span><span class="n">some_simulation</span><span class="p">,</span>           <span class="c1">### the most important part, this function defines the simulation</span>
                            <span class="n">simulation_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pop&#39;</span><span class="p">:</span><span class="n">pop1</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">},</span> <span class="c1">### define the two arguments pop and duration of simulation_function</span>
                            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;my_simulation&#39;</span><span class="p">,</span>                           <span class="c1">### you can give the simulation a name</span>
                            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;my simple example simulation&#39;</span><span class="p">,</span>     <span class="c1">### you can give the simulation a description</span>
                            <span class="n">requirements</span><span class="o">=</span><span class="p">[</span><span class="n">req</span><span class="p">],</span>                             <span class="c1">### a list of requirements for the simulation (here only a single requirement)</span>
                            <span class="n">kwargs_warning</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>                            <span class="c1">### should a warning be printed if simulation kwargs change in future runs</span>
                            <span class="n">monitor_object</span> <span class="o">=</span> <span class="n">mon</span><span class="p">)</span>                           <span class="c1">### the Monitors object which is used to record variables                   </span>
</code></pre></div>
<p>A possible <em>simulation_function</em> could be:
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_simulation</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1">### adjust paramter a of pop</span>
    <span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1">### adjust paramter b of pop</span>
    <span class="n">simulate</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>         <span class="c1">### simulate the duration in ms</span>

    <span class="c1">### return some info</span>
    <span class="c1">### will later be accessible for each run</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;paramter a&#39;</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span> <span class="s1">&#39;paramter b&#39;</span><span class="p">:</span> <span class="n">b</span><span class="p">,</span> <span class="s1">&#39;a_x_duration&#39;</span><span class="p">:</span> <span class="n">a</span><span class="o">*</span><span class="n">duration</span><span class="p">}</span> 
</code></pre></div></p>
<p>And a corresponding requirement could be:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">CompNeuroPy</span> <span class="kn">import</span> <span class="n">ReqPopHasAttr</span>
<span class="n">req</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;req&#39;</span><span class="p">:</span><span class="n">ReqPopHasAttr</span><span class="p">,</span> <span class="s1">&#39;pop&#39;</span><span class="p">:</span><span class="n">pop1</span><span class="p">,</span> <span class="s1">&#39;attr&#39;</span><span class="p">:[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]}</span>
</code></pre></div>
Here, one checks if the population <em>pop1</em> contains the attributes <em>a</em> and <em>b</em>. The <a href="../../additional/simulation_requirements/#CompNeuroPy.simulation_requirements.ReqPopHasAttr"><code>ReqPopHasAttr</code></a> is a built-in requirements-class of CompNeuroPy (see below).</p>
<p>A more detailed example is available in the <a href="../../examples/run_and_monitor_simulations/">Examples</a>.</p>
<h2 id="simulation-information">Simulation information<a class="headerlink" href="#simulation-information" title="Permanent link">#</a></h2>
<p>The function <em>simulation_info()</em> returns a <a href="#CompNeuroPy.generate_simulation.SimInfo"><code>SimInfo</code></a> object which contains usefull information about the simulation runs (see below). The <a href="#CompNeuroPy.generate_simulation.SimInfo"><code>SimInfo</code></a> object also provides usefull analysis functions associated with specific simulation functions. Currently it provides the <em>get_current_arr()</em> which returns arrays containing the input current for each time step of the built-in simulation functions <em>current_step()</em>, <em>current_stim()</em>, and <em>current_ramp()</em>.</p>
<h2 id="simulation-functions">Simulation functions<a class="headerlink" href="#simulation-functions" title="Permanent link">#</a></h2>
<p>Just define a classic ANNarchy simulation in a function. Within the functions, the ANNarchy functions <em>get_population()</em> and <em>get_projection()</em> can be used to access the populations and projections using the population and projection names provided by a <a href="../generate_models/#CompNeuroPy.generate_model.CompNeuroModel"><code>CompNeuroModel</code></a>. The return value of the simulation function can later be retrieved from the <a href="#CompNeuroPy.generate_simulation.SimInfo"><code>SimInfo</code></a> object (the <em>info</em> attribute) in a list containing the return value for each run of the simulation.</p>
<h3 id="example_1">Example:<a class="headerlink" href="#example_1" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ANNarchy</span> <span class="kn">import</span> <span class="n">simulate</span><span class="p">,</span> <span class="n">get_population</span>

<span class="k">def</span> <span class="nf">current_step</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">a1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">a2</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        stimulates a given population in two periods with two input currents</span>

<span class="sd">        pop: population name of population, which should be stimulated with input current</span>
<span class="sd">             neuron model of population has to contain &quot;I_app&quot; as input current in pA</span>
<span class="sd">        t1/t2: times in ms before/after current step</span>
<span class="sd">        a1/a2: current amplitudes before/after current step in pA</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### save prev input current</span>
    <span class="n">I_prev</span> <span class="o">=</span> <span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span><span class="o">.</span><span class="n">I_app</span>

    <span class="c1">### first/pre current step simulation</span>
    <span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span><span class="o">.</span><span class="n">I_app</span> <span class="o">=</span> <span class="n">a1</span>
    <span class="n">simulate</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>

    <span class="c1">### second/post current step simulation</span>
    <span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span><span class="o">.</span><span class="n">I_app</span> <span class="o">=</span> <span class="n">a2</span>
    <span class="n">simulate</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span>

    <span class="c1">### reset input current to previous value</span>
    <span class="n">get_population</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span><span class="o">.</span><span class="n">I_app</span> <span class="o">=</span> <span class="n">I_prev</span>

    <span class="c1">### return some additional information which could be usefull</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span><span class="n">t1</span><span class="o">+</span><span class="n">t2</span><span class="p">}</span>
</code></pre></div>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">#</a></h2>
<p>In order to perform simulations with models, the models must almost always fulfill certain requirements. For example, if the input current of a population is to be set, this population (or the neuron model) must of course have the corresponding variable. Such preconditions can be tested in advance with the <code>simulation_requirements</code> classes. They only need to contain a function <em>run()</em> to test the requirements (if requirements are not met, cause an error). In CompNeuroPy predefined <a href="../../additional/simulation_requirements/"><code>simulation_requirements</code></a> classes are available (CompNeuroPy.simulation_requirements; currently only <a href="../../additional/simulation_requirements/#CompNeuroPy.simulation_requirements.ReqPopHasAttr"><code>ReqPopHasAttr</code></a>). In the <a href="#CompNeuroPy.generate_simulation.CompNeuroSim"><code>CompNeuroSim</code></a> class, the requirements are passed as arguments in a list (see above). Each requirement (list entry) must be defined as a dictionary with keys <em>req</em> (the requirement class) and the arguments of the requirement class (e.g., <em>pop</em> and <em>attr</em> for the <a href="../../additional/simulation_requirements/#CompNeuroPy.simulation_requirements.ReqPopHasAttr"><code>ReqPopHasAttr</code></a>).</p>
<p>Here two requirements are defined (both <a href="../../additional/simulation_requirements/#CompNeuroPy.simulation_requirements.ReqPopHasAttr"><code>ReqPopHasAttr</code></a>). All populations of <em>my_model</em> should contain the attribute (variable or parameter) <em>'I'</em> and all populations of <em>my_other_model</em> should contain the attribute <em>'v'</em>:</p>
<div class="highlight"><pre><span></span><code><span class="n">req1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;req&#39;</span><span class="p">:</span><span class="n">ReqPopHasAttr</span><span class="p">,</span> <span class="s1">&#39;pop&#39;</span><span class="p">:</span><span class="n">my_model</span><span class="o">.</span><span class="n">populations</span><span class="p">,</span> <span class="s1">&#39;attr&#39;</span><span class="p">:</span><span class="s1">&#39;I&#39;</span><span class="p">}</span>
<span class="n">req2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;req&#39;</span><span class="p">:</span><span class="n">ReqPopHasAttr</span><span class="p">,</span> <span class="s1">&#39;pop&#39;</span><span class="p">:</span><span class="n">my_other_model</span><span class="o">.</span><span class="n">populations</span><span class="p">,</span> <span class="s1">&#39;attr&#39;</span><span class="p">:</span><span class="s1">&#39;v&#39;</span><span class="p">}</span>
<span class="n">my_two_model_simulation</span> <span class="o">=</span> <span class="n">CompNeuroSim</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">requirements</span><span class="o">=</span><span class="p">[</span><span class="n">req1</span><span class="p">,</span> <span class="n">req2</span><span class="p">])</span>
</code></pre></div>
<p>As described above, new simulation_kwargs can be passed to the <em>run()</em> function of a <a href="#CompNeuroPy.generate_simulation.CompNeuroSim"><code>CompNeuroSim</code></a> object. Thus, one could initially pass a particular model as simulation_kwargs and for a later run pass a different model. If the requirements are defined as shown above, it is not tested again whether the new model (e.g. <em>my_third_model</em>) also fulfills the requirements (because the requirements were defined for <em>my_model</em> and <em>my_other_model</em>). To work around this, an argument for a <code>simulation_requirements</code> class can also be linked to a simulation_kwargs entry. Thus, if new simulation_kwargs are used, also the simulation_requirements arguments adapt. This can be done using a string with the syntax "simulation_kwargs.&lt;kwarg_name&gt;.&lt;optional_attribute_of_kwarg&gt;", as shown in this example:</p>
<div class="highlight"><pre><span></span><code><span class="n">req1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;req&#39;</span><span class="p">:</span><span class="n">ReqPopHasAttr</span><span class="p">,</span> <span class="s1">&#39;pop&#39;</span><span class="p">:</span><span class="s2">&quot;simulation_kwargs.model1.populations&quot;</span><span class="p">,</span> <span class="s1">&#39;attr&#39;</span><span class="p">:</span><span class="s1">&#39;I&#39;</span><span class="p">}</span>
<span class="n">req2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;req&#39;</span><span class="p">:</span><span class="n">ReqPopHasAttr</span><span class="p">,</span> <span class="s1">&#39;pop&#39;</span><span class="p">:</span><span class="s2">&quot;simulation_kwargs.model2.populations&quot;</span><span class="p">,</span> <span class="s1">&#39;attr&#39;</span><span class="p">:</span><span class="s1">&#39;v&#39;</span><span class="p">}</span>
<span class="n">my_two_model_simulation</span> <span class="o">=</span> <span class="n">CompNeuroSim</span><span class="p">(</span><span class="n">simulation_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;model1&#39;</span><span class="p">:</span><span class="n">my_model</span><span class="p">,</span> <span class="s1">&#39;model2&#39;</span><span class="p">:</span><span class="n">my_other_model</span><span class="p">,</span> <span class="s1">&#39;parameter&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">},</span>
                                        <span class="o">...</span><span class="p">,</span>
                                        <span class="n">requirements</span><span class="o">=</span><span class="p">[</span><span class="n">req1</span><span class="p">,</span> <span class="n">req2</span><span class="p">])</span>
<span class="o">...</span>
<span class="n">my_two_model_simulation</span><span class="o">.</span><span class="n">run</span><span class="p">({</span><span class="s1">&#39;model1&#39;</span><span class="p">:</span><span class="n">my_third_model</span><span class="p">})</span>
</code></pre></div>
<p>Due to the string "simulation_kwargs.model1.populations" the <em>pop</em> argument of <em>req1</em> is now linked to <em>model1</em> (defined in the simulation_kwargs). Thus, in the run where a different model (<em>my_third_model</em>) is used for <em>model1</em>, <em>req1</em> is automatically tested for the new <em>model1</em>.</p>


<div class="doc doc-object doc-class">




<h2 id="CompNeuroPy.generate_simulation.CompNeuroSim" class="doc doc-heading">
          <code>CompNeuroPy.generate_simulation.CompNeuroSim</code>


<a href="#CompNeuroPy.generate_simulation.CompNeuroSim" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents first">

  
      <p>Class for generating a CompNeuroPy simulation.</p>

            <details class="quote">
              <summary>Source code in <code>src/CompNeuroPy/generate_simulation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CompNeuroSim</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for generating a CompNeuroPy simulation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_initialized_simulations</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">simulation_function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
        <span class="n">simulation_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;simulation&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">requirements</span><span class="p">:</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kwargs_warning</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">monitor_object</span><span class="p">:</span> <span class="n">CompNeuroMonitors</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            simulation_function (function):</span>
<span class="sd">                Function which runs the simulation.</span>
<span class="sd">            simulation_kwargs (dict, optional):</span>
<span class="sd">                Dictionary of arguments for the simulation_function. Default: None.</span>
<span class="sd">            name (str, optional):</span>
<span class="sd">                Name of the simulation. Default: &quot;simulation&quot;.</span>
<span class="sd">            description (str, optional):</span>
<span class="sd">                Description of the simulation. Default: &quot;&quot;.</span>
<span class="sd">            requirements (list, optional):</span>
<span class="sd">                List of requirements for the simulation. It&#39;s a list of dictionaries</span>
<span class="sd">                which contain the requirement class itself (key: &quot;req&quot;) and the</span>
<span class="sd">                corresponding arguments (keys are the names of the arguments). The</span>
<span class="sd">                arguments can be inherited from the simulation kwargs by using the</span>
<span class="sd">                syntax &#39;simulation_kwargs.&lt;kwarg_name&gt;&#39;. Default: None.</span>
<span class="sd">            kwargs_warning (bool, optional):</span>
<span class="sd">                If True, a warning is printed if the simulation_kwargs are changed</span>
<span class="sd">                during the simulation. Default: False.</span>
<span class="sd">            monitor_object (CompNeuroMonitors object, optional):</span>
<span class="sd">                CompNeuroMonitors object to automatically track the recording chunk for each</span>
<span class="sd">                simulation run. Default: None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># set simulation function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;simulation&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nr_simulations</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initialized_simulations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">=</span> <span class="n">simulation_function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span> <span class="o">=</span> <span class="n">simulation_kwargs</span>
        <span class="k">if</span> <span class="n">requirements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span> <span class="o">=</span> <span class="n">requirements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">kwargs_warning</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warned</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warned</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitor_object</span> <span class="o">=</span> <span class="n">monitor_object</span>
        <span class="k">if</span> <span class="n">monitor_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">### test initial requirements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_req</span><span class="p">(</span><span class="n">simulation_kwargs</span><span class="o">=</span><span class="n">simulation_kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simulation_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs the simulation function. With each run extend start, end list containing</span>
<span class="sd">        start and end time of the corresponding run and the info list containing the</span>
<span class="sd">        return value of the simulation function.</span>

<span class="sd">        Args:</span>
<span class="sd">            simulation_kwargs (dict, optional):</span>
<span class="sd">                Temporary simulation kwargs which override the initialized simulation</span>
<span class="sd">                kwargs. Default: None, i.e., use values from initialization.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">### define the current simulation kwargs</span>
        <span class="k">if</span> <span class="n">simulation_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1">### not replace initialized kwargs completely but only the kwargs which are given</span>
                <span class="n">tmp_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">simulation_kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">tmp_kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">### there are no initial kwargs --&gt; only use the kwargs which are given</span>
                <span class="n">tmp_kwargs</span> <span class="o">=</span> <span class="n">simulation_kwargs</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_warned</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">WARNING! run&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;changed simulation kwargs, initial requirements may no longer be fulfilled!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_warned</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmp_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span>

        <span class="c1">### before each run, test requirements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_req</span><span class="p">(</span><span class="n">simulation_kwargs</span><span class="o">=</span><span class="n">tmp_kwargs</span><span class="p">)</span>

        <span class="c1">### and append current simulation kwargs to the kwargs variable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp_kwargs</span><span class="p">)</span>

        <span class="c1">### and append the current chunk of the monitors object to the chunk variable</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">monitor_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">monitor_object</span><span class="o">.</span><span class="n">current_chunk</span><span class="p">())</span>

        <span class="c1">### run the simulation, store start and end simulation time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_time</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">tmp_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span><span class="p">(</span><span class="o">**</span><span class="n">tmp_kwargs</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_time</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_nr_simulations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current number of initialized CompNeuroPy simulations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_initialized_simulations</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_test_req</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simulation_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Tests the initialized requirements with the current simulation_kwargs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">simulation_kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># --&gt; use the initial simulation_kwargs</span>
            <span class="n">simulation_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span>

        <span class="k">for</span> <span class="n">req</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">:</span>
            <span class="c1">### check if requirement_kwargs are given besides the requirement itself</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1">### remove the requirement itself from the kwargs</span>
                <span class="n">req_kwargs</span> <span class="o">=</span> <span class="n">ef</span><span class="o">.</span><span class="n">remove_key</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="s2">&quot;req&quot;</span><span class="p">)</span>
                <span class="c1">### check if req_kwargs reference to simulation_kwargs, if yes, use the</span>
                <span class="c1">### current simulation kwargs instead of the intial ones</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">req_kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                        <span class="n">val_split</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
                        <span class="c1">### check if val is a reference to simulation_kwargs</span>
                        <span class="k">if</span> <span class="n">val_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;simulation_kwargs&quot;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">val_split</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="c1">### val is only simulation_kwargs</span>
                                <span class="n">req_kwargs</span> <span class="o">=</span> <span class="n">simulation_kwargs</span>
                            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">val_split</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                                <span class="c1">### val is simulation_kwargs.something</span>
                                <span class="n">req_kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">simulation_kwargs</span><span class="p">[</span><span class="n">val_split</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="c1">### val is simulation_kwargs.something.something... e.g. key=&#39;pops&#39; and val= &#39;simulation_kwargs.model.populations&#39;</span>
                                <span class="n">req_kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span>
                                    <span class="s1">&#39;simulation_kwargs[&quot;&#39;</span>
                                    <span class="o">+</span> <span class="n">val_split</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                                    <span class="o">+</span> <span class="s1">&#39;&quot;].&#39;</span>
                                    <span class="o">+</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">val_split</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
                                <span class="p">)</span>
                <span class="c1">### run the requirement using the current req_kwargs</span>
                <span class="n">req</span><span class="p">[</span><span class="s2">&quot;req&quot;</span><span class="p">](</span><span class="o">**</span><span class="n">req_kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="c1">### a requirement is given without kwargs --&gt; just run it</span>
                <span class="n">req</span><span class="p">[</span><span class="s2">&quot;req&quot;</span><span class="p">]()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_current_arr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method exclusively for current_step simulation functions. Gets the current array</span>
<span class="sd">        (input current value for each time step) of all runs.</span>

<span class="sd">        !!! warning</span>
<span class="sd">            This method will be removed soon. Use the get_current_arr method of the</span>
<span class="sd">            SimInfo class instead.</span>

<span class="sd">        Args:</span>
<span class="sd">            dt (float):</span>
<span class="sd">                Time step size of the simulation.</span>
<span class="sd">            flat (bool, optional):</span>
<span class="sd">                If True, returns a flattened array. Assumes that all runs are run</span>
<span class="sd">                consecutively without brakes. Default: False, i.e., returns a list of</span>
<span class="sd">                arrays.</span>

<span class="sd">        Returns:</span>
<span class="sd">            current_arr (list of arrays):</span>
<span class="sd">                List of arrays containing the current values for each time step of each</span>
<span class="sd">                run. If flat=True, returns a flattened array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;current_step&quot;</span>
        <span class="p">),</span> <span class="s1">&#39;ERROR get_current_arr: Simulation has to be &quot;current_step&quot;!&#39;</span>
        <span class="c1">### TODO: remove because deprecated</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;WARNING get_current_arr function will only be available in SimInfo soon.&quot;</span>
        <span class="p">)</span>
        <span class="n">current_arr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)):</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t1&quot;</span><span class="p">]</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t2&quot;</span><span class="p">]</span>
            <span class="n">a1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a1&quot;</span><span class="p">]</span>
            <span class="n">a2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a2&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">t1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">t2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t1</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a1</span><span class="p">,</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t2</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a2</span><span class="p">,</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">t2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t2</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t1</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">flat</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">current_arr</span>

    <span class="k">def</span> <span class="nf">simulation_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a SimInfo object containing the simulation information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            simulation_info_obj (SimInfo):</span>
<span class="sd">                Simulation information object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">simulation_info_obj</span> <span class="o">=</span> <span class="n">SimInfo</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">simulation_info_obj</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.generate_simulation.CompNeuroSim.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">simulation_function</span><span class="p">,</span> <span class="n">simulation_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">requirements</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">monitor_object</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#CompNeuroPy.generate_simulation.CompNeuroSim.__init__" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>simulation_function</code></td>
          <td>
                <code>function</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Function which runs the simulation.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>simulation_kwargs</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary of arguments for the simulation_function. Default: None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the simulation. Default: "simulation".</p>
            </div>
          </td>
          <td>
                <code>&#39;simulation&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Description of the simulation. Default: "".</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>requirements</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of requirements for the simulation. It's a list of dictionaries
which contain the requirement class itself (key: "req") and the
corresponding arguments (keys are the names of the arguments). The
arguments can be inherited from the simulation kwargs by using the
syntax 'simulation_kwargs.<kwarg_name>'. Default: None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs_warning</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, a warning is printed if the simulation_kwargs are changed
during the simulation. Default: False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>monitor_object</code></td>
          <td>
                <code>CompNeuroMonitors object</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>CompNeuroMonitors object to automatically track the recording chunk for each
simulation run. Default: None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/generate_simulation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">simulation_function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
    <span class="n">simulation_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;simulation&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">requirements</span><span class="p">:</span> <span class="nb">list</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">kwargs_warning</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">monitor_object</span><span class="p">:</span> <span class="n">CompNeuroMonitors</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        simulation_function (function):</span>
<span class="sd">            Function which runs the simulation.</span>
<span class="sd">        simulation_kwargs (dict, optional):</span>
<span class="sd">            Dictionary of arguments for the simulation_function. Default: None.</span>
<span class="sd">        name (str, optional):</span>
<span class="sd">            Name of the simulation. Default: &quot;simulation&quot;.</span>
<span class="sd">        description (str, optional):</span>
<span class="sd">            Description of the simulation. Default: &quot;&quot;.</span>
<span class="sd">        requirements (list, optional):</span>
<span class="sd">            List of requirements for the simulation. It&#39;s a list of dictionaries</span>
<span class="sd">            which contain the requirement class itself (key: &quot;req&quot;) and the</span>
<span class="sd">            corresponding arguments (keys are the names of the arguments). The</span>
<span class="sd">            arguments can be inherited from the simulation kwargs by using the</span>
<span class="sd">            syntax &#39;simulation_kwargs.&lt;kwarg_name&gt;&#39;. Default: None.</span>
<span class="sd">        kwargs_warning (bool, optional):</span>
<span class="sd">            If True, a warning is printed if the simulation_kwargs are changed</span>
<span class="sd">            during the simulation. Default: False.</span>
<span class="sd">        monitor_object (CompNeuroMonitors object, optional):</span>
<span class="sd">            CompNeuroMonitors object to automatically track the recording chunk for each</span>
<span class="sd">            simulation run. Default: None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># set simulation function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;simulation&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nr_simulations</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initialized_simulations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">=</span> <span class="n">simulation_function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span> <span class="o">=</span> <span class="n">simulation_kwargs</span>
    <span class="k">if</span> <span class="n">requirements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span> <span class="o">=</span> <span class="n">requirements</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">kwargs_warning</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_warned</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_warned</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">monitor_object</span> <span class="o">=</span> <span class="n">monitor_object</span>
    <span class="k">if</span> <span class="n">monitor_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">### test initial requirements</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_test_req</span><span class="p">(</span><span class="n">simulation_kwargs</span><span class="o">=</span><span class="n">simulation_kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.generate_simulation.CompNeuroSim.run" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">simulation_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#CompNeuroPy.generate_simulation.CompNeuroSim.run" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Runs the simulation function. With each run extend start, end list containing
start and end time of the corresponding run and the info list containing the
return value of the simulation function.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>simulation_kwargs</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Temporary simulation kwargs which override the initialized simulation
kwargs. Default: None, i.e., use values from initialization.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/generate_simulation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simulation_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs the simulation function. With each run extend start, end list containing</span>
<span class="sd">    start and end time of the corresponding run and the info list containing the</span>
<span class="sd">    return value of the simulation function.</span>

<span class="sd">    Args:</span>
<span class="sd">        simulation_kwargs (dict, optional):</span>
<span class="sd">            Temporary simulation kwargs which override the initialized simulation</span>
<span class="sd">            kwargs. Default: None, i.e., use values from initialization.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### define the current simulation kwargs</span>
    <span class="k">if</span> <span class="n">simulation_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">### not replace initialized kwargs completely but only the kwargs which are given</span>
            <span class="n">tmp_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">simulation_kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">tmp_kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">### there are no initial kwargs --&gt; only use the kwargs which are given</span>
            <span class="n">tmp_kwargs</span> <span class="o">=</span> <span class="n">simulation_kwargs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_warned</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">WARNING! run&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;changed simulation kwargs, initial requirements may no longer be fulfilled!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warned</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tmp_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_kwargs</span>

    <span class="c1">### before each run, test requirements</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_test_req</span><span class="p">(</span><span class="n">simulation_kwargs</span><span class="o">=</span><span class="n">tmp_kwargs</span><span class="p">)</span>

    <span class="c1">### and append current simulation kwargs to the kwargs variable</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp_kwargs</span><span class="p">)</span>

    <span class="c1">### and append the current chunk of the monitors object to the chunk variable</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">monitor_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">monitor_object</span><span class="o">.</span><span class="n">current_chunk</span><span class="p">())</span>

    <span class="c1">### run the simulation, store start and end simulation time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_time</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">tmp_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span><span class="p">(</span><span class="o">**</span><span class="n">tmp_kwargs</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_time</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.generate_simulation.CompNeuroSim.get_current_arr" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_current_arr</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#CompNeuroPy.generate_simulation.CompNeuroSim.get_current_arr" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Method exclusively for current_step simulation functions. Gets the current array
(input current value for each time step) of all runs.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method will be removed soon. Use the get_current_arr method of the
SimInfo class instead.</p>
</div>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dt</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Time step size of the simulation.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>flat</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, returns a flattened array. Assumes that all runs are run
consecutively without brakes. Default: False, i.e., returns a list of
arrays.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>current_arr</code></td>          <td>
                <code>list of arrays</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of arrays containing the current values for each time step of each
run. If flat=True, returns a flattened array.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/generate_simulation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_arr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method exclusively for current_step simulation functions. Gets the current array</span>
<span class="sd">    (input current value for each time step) of all runs.</span>

<span class="sd">    !!! warning</span>
<span class="sd">        This method will be removed soon. Use the get_current_arr method of the</span>
<span class="sd">        SimInfo class instead.</span>

<span class="sd">    Args:</span>
<span class="sd">        dt (float):</span>
<span class="sd">            Time step size of the simulation.</span>
<span class="sd">        flat (bool, optional):</span>
<span class="sd">            If True, returns a flattened array. Assumes that all runs are run</span>
<span class="sd">            consecutively without brakes. Default: False, i.e., returns a list of</span>
<span class="sd">            arrays.</span>

<span class="sd">    Returns:</span>
<span class="sd">        current_arr (list of arrays):</span>
<span class="sd">            List of arrays containing the current values for each time step of each</span>
<span class="sd">            run. If flat=True, returns a flattened array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;current_step&quot;</span>
    <span class="p">),</span> <span class="s1">&#39;ERROR get_current_arr: Simulation has to be &quot;current_step&quot;!&#39;</span>
    <span class="c1">### TODO: remove because deprecated</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s2">&quot;WARNING get_current_arr function will only be available in SimInfo soon.&quot;</span>
    <span class="p">)</span>
    <span class="n">current_arr</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)):</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t1&quot;</span><span class="p">]</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t2&quot;</span><span class="p">]</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a1&quot;</span><span class="p">]</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a2&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">t1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">t2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t1</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a1</span><span class="p">,</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t2</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a2</span><span class="p">,</span>
                    <span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">t2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t2</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t1</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">flat</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">current_arr</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.generate_simulation.CompNeuroSim.simulation_info" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">simulation_info</span><span class="p">()</span></code>

<a href="#CompNeuroPy.generate_simulation.CompNeuroSim.simulation_info" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns a SimInfo object containing the simulation information.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>simulation_info_obj</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="CompNeuroPy.generate_simulation.SimInfo" href="#CompNeuroPy.generate_simulation.SimInfo">SimInfo</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Simulation information object.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/generate_simulation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">simulation_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a SimInfo object containing the simulation information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        simulation_info_obj (SimInfo):</span>
<span class="sd">            Simulation information object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">simulation_info_obj</span> <span class="o">=</span> <span class="n">SimInfo</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">simulation_info_obj</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="CompNeuroPy.generate_simulation.SimInfo" class="doc doc-heading">
          <code>CompNeuroPy.generate_simulation.SimInfo</code>


<a href="#CompNeuroPy.generate_simulation.SimInfo" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents first">

  
      <p>Class for storing the simulation information.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the simulation.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Description of the simulation.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>simulation_function</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the simulation function.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>start</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of start times of the simulation runs.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>end</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of end times of the simulation runs.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of return values of the simulation function of each simulation run.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of simulation kwargs of the simulation function of each simulation run.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>monitor_chunk</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of recording chunks of the used CompNeuroMonitors object of each simulation run.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/CompNeuroPy/generate_simulation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SimInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for storing the simulation information.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str):</span>
<span class="sd">            Name of the simulation.</span>
<span class="sd">        description (str):</span>
<span class="sd">            Description of the simulation.</span>
<span class="sd">        simulation_function (str):</span>
<span class="sd">            Name of the simulation function.</span>
<span class="sd">        start (list):</span>
<span class="sd">            List of start times of the simulation runs.</span>
<span class="sd">        end (list):</span>
<span class="sd">            List of end times of the simulation runs.</span>
<span class="sd">        info (list):</span>
<span class="sd">            List of return values of the simulation function of each simulation run.</span>
<span class="sd">        kwargs (list):</span>
<span class="sd">            List of simulation kwargs of the simulation function of each simulation run.</span>
<span class="sd">        monitor_chunk (list):</span>
<span class="sd">            List of recording chunks of the used CompNeuroMonitors object of each simulation run.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">description</span><span class="p">,</span>
        <span class="n">simulation_function</span><span class="p">,</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">end</span><span class="p">,</span>
        <span class="n">info</span><span class="p">,</span>
        <span class="n">kwargs</span><span class="p">,</span>
        <span class="n">monitor_chunk</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialization of the simulation information object.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the simulation.</span>
<span class="sd">            description (str):</span>
<span class="sd">                Description of the simulation.</span>
<span class="sd">            simulation_function (str):</span>
<span class="sd">                Name of the simulation function.</span>
<span class="sd">            start (list):</span>
<span class="sd">                List of start times of the simulation runs.</span>
<span class="sd">            end (list):</span>
<span class="sd">                List of end times of the simulation runs.</span>
<span class="sd">            info (list):</span>
<span class="sd">                List of return values of the simulation function of each simulation run.</span>
<span class="sd">            kwargs (list):</span>
<span class="sd">                List of simulation kwargs of the simulation function of each simulation</span>
<span class="sd">                run.</span>
<span class="sd">            monitor_chunk (list):</span>
<span class="sd">                List of recording chunks of the used CompNeuroMonitors object of each simulation</span>
<span class="sd">                run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">=</span> <span class="n">simulation_function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="n">info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span> <span class="o">=</span> <span class="n">monitor_chunk</span>

    <span class="k">def</span> <span class="nf">get_current_arr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method exclusively for the following simulation functions (built-in</span>
<span class="sd">        CompNeuroPy):</span>
<span class="sd">            - current_step</span>
<span class="sd">            - current_stim</span>
<span class="sd">            - current_ramp</span>
<span class="sd">        Gets the current array (input current value for each time step) of all runs.</span>

<span class="sd">        Args:</span>
<span class="sd">            dt (float):</span>
<span class="sd">                Time step size of the simulation.</span>
<span class="sd">            flat (bool, optional):</span>
<span class="sd">                If True, returns a flattened array. Assumes that all runs are run</span>
<span class="sd">                consecutively without brakes. Default: False, i.e., returns a list of</span>
<span class="sd">                arrays.</span>

<span class="sd">        Returns:</span>
<span class="sd">            current_arr (list of arrays):</span>
<span class="sd">                List of arrays containing the current values for each time step of each</span>
<span class="sd">                run. If flat=True, returns a flattened array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_step&quot;</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_stim&quot;</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_ramp&quot;</span>
        <span class="p">),</span> <span class="s1">&#39;ERROR get_current_arr: Simulation has to be &quot;current_step&quot;, &quot;current_stim&quot; or &quot;current_ramp&quot;!&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_step&quot;</span><span class="p">:</span>
            <span class="n">current_arr</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)):</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t1&quot;</span><span class="p">]</span>
                <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t2&quot;</span><span class="p">]</span>
                <span class="n">a1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a1&quot;</span><span class="p">]</span>
                <span class="n">a2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a2&quot;</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">t1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">t2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                            <span class="p">[</span>
                                <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t1</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a1</span><span class="p">,</span>
                                <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t2</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a2</span><span class="p">,</span>
                            <span class="p">]</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">t2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t2</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a2</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t1</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a1</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">flat</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">current_arr</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_stim&quot;</span><span class="p">:</span>
            <span class="n">current_arr</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)):</span>
                <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t&quot;</span><span class="p">]</span>
                <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">flat</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">current_arr</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_ramp&quot;</span><span class="p">:</span>
            <span class="n">current_arr</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)):</span>
                <span class="n">amp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a0&quot;</span><span class="p">]</span>
                <span class="n">current_arr_ramp</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">stim_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;n&quot;</span><span class="p">]):</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;dur_stim&quot;</span><span class="p">]</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="n">amp</span>
                    <span class="n">current_arr_ramp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
                    <span class="n">amp</span> <span class="o">=</span> <span class="n">amp</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;da&quot;</span><span class="p">]</span>
                <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr_ramp</span><span class="p">)))</span>

            <span class="k">if</span> <span class="n">flat</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">current_arr</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.generate_simulation.SimInfo.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">simulation_function</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">monitor_chunk</span><span class="p">)</span></code>

<a href="#CompNeuroPy.generate_simulation.SimInfo.__init__" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Initialization of the simulation information object.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the simulation.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Description of the simulation.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>simulation_function</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the simulation function.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of start times of the simulation runs.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of end times of the simulation runs.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>info</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of return values of the simulation function of each simulation run.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of simulation kwargs of the simulation function of each simulation
run.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>monitor_chunk</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of recording chunks of the used CompNeuroMonitors object of each simulation
run.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/generate_simulation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">description</span><span class="p">,</span>
    <span class="n">simulation_function</span><span class="p">,</span>
    <span class="n">start</span><span class="p">,</span>
    <span class="n">end</span><span class="p">,</span>
    <span class="n">info</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="p">,</span>
    <span class="n">monitor_chunk</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialization of the simulation information object.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str):</span>
<span class="sd">            Name of the simulation.</span>
<span class="sd">        description (str):</span>
<span class="sd">            Description of the simulation.</span>
<span class="sd">        simulation_function (str):</span>
<span class="sd">            Name of the simulation function.</span>
<span class="sd">        start (list):</span>
<span class="sd">            List of start times of the simulation runs.</span>
<span class="sd">        end (list):</span>
<span class="sd">            List of end times of the simulation runs.</span>
<span class="sd">        info (list):</span>
<span class="sd">            List of return values of the simulation function of each simulation run.</span>
<span class="sd">        kwargs (list):</span>
<span class="sd">            List of simulation kwargs of the simulation function of each simulation</span>
<span class="sd">            run.</span>
<span class="sd">        monitor_chunk (list):</span>
<span class="sd">            List of recording chunks of the used CompNeuroMonitors object of each simulation</span>
<span class="sd">            run.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">=</span> <span class="n">simulation_function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="n">info</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">monitor_chunk</span> <span class="o">=</span> <span class="n">monitor_chunk</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="CompNeuroPy.generate_simulation.SimInfo.get_current_arr" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_current_arr</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#CompNeuroPy.generate_simulation.SimInfo.get_current_arr" class="headerlink" title="Permanent link">#</a></h3>


  <div class="doc doc-contents ">
  
      <p>Method exclusively for the following simulation functions (built-in
CompNeuroPy):
    - current_step
    - current_stim
    - current_ramp
Gets the current array (input current value for each time step) of all runs.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dt</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Time step size of the simulation.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>flat</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, returns a flattened array. Assumes that all runs are run
consecutively without brakes. Default: False, i.e., returns a list of
arrays.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>current_arr</code></td>          <td>
                <code>list of arrays</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of arrays containing the current values for each time step of each
run. If flat=True, returns a flattened array.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/CompNeuroPy/generate_simulation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_arr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method exclusively for the following simulation functions (built-in</span>
<span class="sd">    CompNeuroPy):</span>
<span class="sd">        - current_step</span>
<span class="sd">        - current_stim</span>
<span class="sd">        - current_ramp</span>
<span class="sd">    Gets the current array (input current value for each time step) of all runs.</span>

<span class="sd">    Args:</span>
<span class="sd">        dt (float):</span>
<span class="sd">            Time step size of the simulation.</span>
<span class="sd">        flat (bool, optional):</span>
<span class="sd">            If True, returns a flattened array. Assumes that all runs are run</span>
<span class="sd">            consecutively without brakes. Default: False, i.e., returns a list of</span>
<span class="sd">            arrays.</span>

<span class="sd">    Returns:</span>
<span class="sd">        current_arr (list of arrays):</span>
<span class="sd">            List of arrays containing the current values for each time step of each</span>
<span class="sd">            run. If flat=True, returns a flattened array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_step&quot;</span>
        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_stim&quot;</span>
        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_ramp&quot;</span>
    <span class="p">),</span> <span class="s1">&#39;ERROR get_current_arr: Simulation has to be &quot;current_step&quot;, &quot;current_stim&quot; or &quot;current_ramp&quot;!&#39;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_step&quot;</span><span class="p">:</span>
        <span class="n">current_arr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)):</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t1&quot;</span><span class="p">]</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t2&quot;</span><span class="p">]</span>
            <span class="n">a1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a1&quot;</span><span class="p">]</span>
            <span class="n">a2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a2&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">t1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">t2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t1</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a1</span><span class="p">,</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t2</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a2</span><span class="p">,</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">t2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t2</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t1</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">flat</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">current_arr</span>

    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_stim&quot;</span><span class="p">:</span>
        <span class="n">current_arr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;t&quot;</span><span class="p">]</span>
            <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">flat</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">current_arr</span>

    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation_function</span> <span class="o">==</span> <span class="s2">&quot;current_ramp&quot;</span><span class="p">:</span>
        <span class="n">current_arr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)):</span>
            <span class="n">amp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;a0&quot;</span><span class="p">]</span>
            <span class="n">current_arr_ramp</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">stim_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;n&quot;</span><span class="p">]):</span>
                <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;dur_stim&quot;</span><span class="p">]</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">amp</span>
                <span class="n">current_arr_ramp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="n">dt</span><span class="p">)))</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
                <span class="n">amp</span> <span class="o">=</span> <span class="n">amp</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="n">run</span><span class="p">][</span><span class="s2">&quot;da&quot;</span><span class="p">]</span>
            <span class="n">current_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr_ramp</span><span class="p">)))</span>

        <span class="k">if</span> <span class="n">flat</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">current_arr</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">current_arr</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Oliver Maith
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>